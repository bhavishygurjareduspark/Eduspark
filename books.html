<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduSparK - Share Knowledge</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
   
    <style>
        :root {
            --primary-color: #ff4757;
            --primary-light: #ff6b81;
            --primary-dark: #e84118;
            --secondary-color: #2f3542;
            --secondary-light: #57606f;
            --secondary-dark: #1e272e;
            --text-light: #f1f2f6;
            --text-dark: #2f3542;
            --text-muted: #747d8c;
            --bg-light: #ffffff;
            --bg-dark: #1e272e;
            --card-bg: #ffffff;
            --card-bg-dark: #2f3542;
            --gradient: linear-gradient(135deg, #ff4757, #2f3542);
            --gradient-light: linear-gradient(135deg, #ff6b81, #57606f);
            --gradient-dark: linear-gradient(135deg, #e84118, #1e272e);
            --message-sent-bg: linear-gradient(135deg, #ff4757, #ff6b81);
            --message-received-bg: #f1f2f6;
            --message-received-text: #2f3542;
            --typing-indicator-bg: #f1f2f6;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --border-radius-xs: 6px;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --transition-fast: all 0.15s ease;
            --header-height: 70px;
            --nav-height: 70px;
            --max-width: 1200px;
        }

        [data-theme="dark"] {
            --primary-color: #ff6b81;
            --primary-light: #ff8fa3;
            --primary-dark: #ff4757;
            --secondary-color: #1e272e;
            --secondary-light: #2f3542;
            --secondary-dark: #12181f;
            --text-light: #f1f2f6;
            --text-dark: #dfe4ea;
            --text-muted: #a4b0be;
            --bg-light: #2f3542;
            --bg-dark: #1e272e;
            --card-bg: #2f3542;
            --card-bg-dark: #1e272e;
            --gradient: linear-gradient(135deg, #ff6b81, #1e272e);
            --gradient-light: linear-gradient(135deg, #ff8fa3, #2f3542);
            --gradient-dark: linear-gradient(135deg, #ff4757, #12181f);
            --message-sent-bg: linear-gradient(135deg, #ff6b81, #ff4757);
            --message-received-bg: #1e272e;
            --message-received-text: #dfe4ea;
            --typing-indicator-bg: #1e272e;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            min-height: 100vh;
            padding-top: var(--header-height);
            padding-bottom: var(--nav-height);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Enhanced Header with Glass Morphism */
        .header {
            background-color: rgba(47, 53, 66, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: var(--text-light);
            height: var(--header-height);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow-md);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 0 20px;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        [data-theme="dark"] .header {
            background-color: rgba(30, 39, 46, 0.95);
        }

        .header.scrolled {
            height: 60px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .logo-container {
            display: flex;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            text-decoration: none;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            padding: 5px 0;
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--gradient);
            transform-origin: right;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo:hover::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        .logo i {
            margin-right: 10px;
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .logo-text {
            display: inline-block;
            position: relative;
        }

        .logo-text::after {
            content: '‚ù§Ô∏è‚Äçüî•';
            position: absolute;
            right: -25px;
            top: -5px;
            font-size: 1.2rem;
            animation: pulse 1.5s infinite;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-container {
            position: relative;
            width: 250px;
            transition: all 0.3s ease;
        }

        .search-container.active {
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: none;
            border-radius: 30px;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-input:focus {
            outline: none;
            background-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            opacity: 0.7;
            font-size: 1rem;
        }

        .search-results {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            right: 0;
            background-color: var(--card-bg);
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-xl);
            max-height: 400px;
            overflow-y: auto;
            z-index: 1001;
            display: none;
            animation: fadeIn 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .search-results {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        [data-theme="dark"] .search-result-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .search-result-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        [data-theme="dark"] .search-result-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .search-result-item h4 {
            font-size: 0.95rem;
            color: var(--text-dark);
            margin-bottom: 5px;
            font-weight: 500;
        }

        .search-result-item p {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.3rem;
            cursor: pointer;
            position: relative;
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: transform 0.5s ease, background-color 0.3s ease;
        }

        .theme-toggle:hover {
            transform: rotate(180deg) scale(1.1);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .theme-toggle .sun {
            display: none;
            position: absolute;
        }

        .theme-toggle .moon {
            display: block;
            position: absolute;
        }

        [data-theme="dark"] .theme-toggle .sun {
            display: block;
        }

        [data-theme="dark"] .theme-toggle .moon {
            display: none;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary-color);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient);
            color: white;
            font-weight: 600;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .user-avatar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .user-avatar:hover::after {
            opacity: 1;
        }

        /* Bottom Navigation with Glass Morphism */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(47, 53, 66, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: var(--nav-height);
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        [data-theme="dark"] .bottom-nav {
            background-color: rgba(30, 39, 46, 0.95);
        }

        .nav-item {
            color: var(--text-light);
            font-size: 1.3rem;
            padding: 10px;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: var(--gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .nav-item:hover {
            transform: translateY(-5px);
            color: white;
        }

        .nav-item:hover::before {
            opacity: 1;
        }

        .nav-item.active {
            color: white;
            transform: translateY(-5px);
        }

        .nav-item.active::before {
            opacity: 1;
        }

        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background-color: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--primary-color);
        }

        .notification-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            animation: pulse 2s infinite;
            z-index: 1;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .add-btn {
            background: var(--gradient);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.7rem;
            transform: translateY(-20px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4);
            transition: var(--transition);
            cursor: pointer;
            border: none;
            outline: none;
            z-index: 1001;
            position: relative;
            overflow: hidden;
        }

        .add-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .add-btn:hover {
            transform: translateY(-20px) scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.6);
            background: var(--gradient-light);
            animation: none;
        }

        .add-btn:hover::after {
            opacity: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(-20px); }
            50% { transform: translateY(-25px); }
        }

        /* Main Content */
        .container {
            padding: 20px;
            max-width: var(--max-width);
            margin: 0 auto;
        }

        .page-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
            font-weight: 600;
            padding-bottom: 8px;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--gradient);
            border-radius: 4px;
            transform-origin: left;
            animation: scaleIn 0.5s ease-out forwards;
        }

        @keyframes scaleIn {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .book-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.1);
            transform: translateY(30px);
            opacity: 0;
            animation: cardAppear 0.6s ease forwards;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        [data-theme="dark"] .book-card {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes cardAppear {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .book-img-container {
            height: 220px;
            overflow: hidden;
            position: relative;
            background-color: rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        [data-theme="dark"] .book-img-container {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .book-img {
            width: auto;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .book-card:hover .book-img {
            transform: scale(1.05);
        }

        .book-info {
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .book-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .book-author {
            font-size: 0.85rem;
            color: var(--primary-color);
            margin-bottom: 12px;
            font-weight: 500;
        }

        .book-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .book-meta i {
            margin-right: 5px;
            color: var(--primary-color);
            font-size: 0.8rem;
        }

        .book-admin-info {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: auto;
            padding-top: 10px;
            border-top: 1px dashed rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        [data-theme="dark"] .book-admin-info {
            border-top: 1px dashed rgba(255, 255, 255, 0.1);
        }

        .book-admin-info i {
            color: var(--primary-color);
            font-size: 0.8rem;
        }

        .download-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.85rem;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            margin-top: 10px;
        }

        .download-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 40px;
            height: 200%;
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(30deg);
            transition: all 0.5s ease;
        }

        .download-btn:hover::after {
            left: 120%;
        }

        .download-btn i {
            margin-right: 8px;
            font-size: 0.8rem;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 71, 87, 0.4);
            background: var(--gradient-light);
        }

        /* Enhanced Profile Page */
        .profile-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-light);
            z-index: 2000;
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
            overflow-y: auto;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
        }

        .profile-page.active {
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
        }

        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            padding-top: 20px;
            text-align: center;
            position: relative;
        }

        .profile-back-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.3rem;
            position: absolute;
            left: 0;
            top: 0;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .profile-back-btn:hover {
            transform: translateX(-5px);
            background-color: rgba(255, 71, 87, 0.1);
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary-color);
            margin-bottom: 15px;
            background: var(--gradient);
            color: white;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .profile-avatar::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.3),
                rgba(255, 255, 255, 0)
            );
            transform: rotate(30deg);
            transition: all 0.5s ease;
        }

        .profile-avatar:hover::before {
            transform: rotate(30deg) translateX(50%);
        }

        .profile-info {
            width: 100%;
            margin-top: 10px;
        }

        .profile-info h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: var(--text-dark);
            position: relative;
            display: inline-block;
            font-weight: 600;
        }

        .profile-info h2::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: var(--gradient);
            border-radius: 3px;
        }

        .profile-username {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .profile-email {
            color: var(--text-muted);
            margin-bottom: 15px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-email i {
            margin-right: 8px;
            font-size: 0.95rem;
        }

        .profile-bio {
            margin: 20px 0;
            color: var(--text-dark);
            line-height: 1.7;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
            font-size: 0.95rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        [data-theme="dark"] .profile-bio {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .profile-bio::before {
            content: '"';
            position: absolute;
            top: 10px;
            left: 15px;
            font-size: 3.5rem;
            color: var(--primary-color);
            opacity: 0.1;
            font-family: serif;
            line-height: 1;
        }

        .profile-bio::after {
            content: '"';
            position: absolute;
            bottom: -20px;
            right: 15px;
            font-size: 3.5rem;
            color: var(--primary-color);
            opacity: 0.1;
            font-family: serif;
            line-height: 1;
        }

        .profile-stats {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            background: rgba(0, 0, 0, 0.05);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        [data-theme="dark"] .profile-stats {
            background: rgba(255, 255, 255, 0.05);
        }

        .profile-stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient);
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            flex: 1;
            transition: transform 0.3s ease;
            position: relative;
        }

        .stat-item:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            width: 1px;
            height: 40px;
            background-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .stat-item:not(:last-child)::after {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .stat-item:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
            position: relative;
            display: inline-block;
        }

        .stat-number::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: var(--gradient);
            border-radius: 3px;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .profile-books-title {
            font-size: 1.6rem;
            margin: 30px 0 20px;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
            text-align: center;
            width: 100%;
            font-weight: 600;
        }

        .profile-books-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--gradient);
            border-radius: 3px;
        }

        .profile-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
        }

        .edit-profile {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            flex: 1;
            max-width: 200px;
        }

        .edit-profile::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .edit-profile:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 71, 87, 0.5);
            background: var(--gradient-light);
        }

        .edit-profile:hover::after {
            opacity: 1;
        }

        .logout-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            flex: 1;
            max-width: 200px;
        }

        .logout-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .logout-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(47, 53, 66, 0.3);
            background: var(--secondary-light);
        }

        .logout-btn:hover::after {
            opacity: 1;
        }

        /* Full Page Chat */
        .chat-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-light);
            z-index: 2000;
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
            display: flex;
            flex-direction: column;
            opacity: 0;
            visibility: hidden;
        }

        .chat-page.active {
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
        }

        .chat-header {
            padding: 15px;
            background: var(--gradient);
            color: white;
            text-align: center;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            height: var(--header-height);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        .chat-back-btn {
            position: absolute;
            left: 15px;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .chat-back-btn:hover {
            transform: translateX(-5px);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .chat-title {
            font-size: 1.3rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: var(--bg-light);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            display: flex;
            flex-direction: column;
            max-width: 85%;
            opacity: 0;
            transform: translateY(10px);
            animation: messageAppear 0.4s forwards;
            animation-delay: 0.1s;
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.sent {
            align-self: flex-end;
            align-items: flex-end;
        }

        .message.received {
            align-self: flex-start;
            align-items: flex-start;
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 1rem;
            line-height: 1.5;
            word-break: break-word;
            position: relative;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .message.sent .message-content {
            background: var(--message-sent-bg);
            color: white;
            border-top-right-radius: 5px;
        }

        .message.received .message-content {
            background-color: var(--message-received-bg);
            color: var(--message-received-text);
            border-top-left-radius: 5px;
        }

        .message-time {
            font-size: 0.75rem;
            color: var(--text-dark);
            opacity: 0.7;
            margin-top: 6px;
            align-self: flex-end;
        }

        .message.sent .message-time {
            color: rgba(255, 255, 255, 0.7);
        }

        .message-sender {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 6px;
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            background-color: var(--bg-light);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            align-items: center;
            box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.05);
        }

        [data-theme="dark"] .chat-input-container {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 25px;
            font-family: 'Poppins', sans-serif;
            background-color: var(--typing-indicator-bg);
            color: var(--text-dark);
            outline: none;
            resize: none;
            max-height: 120px;
            overflow-y: auto;
            margin-right: 12px;
            font-size: 1rem;
            box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        [data-theme="dark"] .chat-input {
            box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.3);
        }

        .chat-input:focus {
            box-shadow: 0 0 0 2px rgba(255, 71, 87, 0.3), inset 0 1px 4px rgba(0, 0, 0, 0.1);
        }

        .send-btn {
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            flex-shrink: 0;
            font-size: 1.2rem;
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .send-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .send-btn:hover {
            transform: scale(1.1);
            background: var(--gradient-light);
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.5);
        }

        .send-btn:hover::after {
            opacity: 1;
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            background: var(--secondary-light);
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background-color: var(--typing-indicator-bg);
            border-radius: 18px;
            margin-left: 20px;
            margin-bottom: 8px;
            align-self: flex-start;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 0.85rem;
            color: var(--text-muted);
            box-shadow: var(--shadow-sm);
        }

        .typing-indicator.active {
            opacity: 1;
        }

        .typing-indicator span {
            height: 7px;
            width: 7px;
            background-color: var(--primary-color);
            border-radius: 50%;
            display: inline-block;
            margin: 0 3px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-4px);
            }
        }

        /* Message status indicators */
        .message-status {
            display: inline-block;
            margin-left: 6px;
            font-size: 0.8rem;
        }

        .message-status.sent {
            color: rgba(255, 255, 255, 0.7);
        }

        .message-status.delivered {
            color: rgba(255, 255, 255, 0.9);
        }

        /* Message bubble tail effect */
        .message.sent .message-content::after {
            content: '';
            position: absolute;
            right: -6px;
            top: 0;
            width: 12px;
            height: 20px;
            background: var(--message-sent-bg);
            clip-path: polygon(0 0, 100% 0, 100% 100%);
        }

        .message.received .message-content::after {
            content: '';
            position: absolute;
            left: -6px;
            top: 0;
            width: 12px;
            height: 20px;
            background: var(--message-received-bg);
            clip-path: polygon(0 0, 100% 0, 0 100%);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            opacity: 0.7;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-8px); }
        }

        .empty-state h3 {
            margin-bottom: 12px;
            color: var(--text-dark);
            font-size: 1.4rem;
            font-weight: 600;
        }

        .empty-state p {
            font-size: 0.95rem;
            max-width: 350px;
            margin: 0 auto;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 450px;
            padding: 25px;
            box-shadow: var(--shadow-xl);
            transform: translateY(-30px);
            transition: transform 0.3s ease, opacity 0.3s ease;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .modal-content {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.7rem;
            color: var(--text-dark);
            cursor: pointer;
            background: none;
            border: none;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--primary-color);
            transform: rotate(90deg);
            background-color: rgba(255, 71, 87, 0.1);
        }

        .modal-title {
            font-size: 1.7rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-align: center;
            position: relative;
            padding-bottom: 12px;
            font-weight: 600;
        }

        .modal-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: var(--gradient);
            border-radius: 4px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius-sm);
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            transition: var(--transition);
            font-size: 0.95rem;
        }

        [data-theme="dark"] .form-input {
            border-color: rgba(255, 255, 255, 0.2);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.2);
        }

        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-input-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .file-input-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .file-input-btn:hover {
            background: var(--gradient-light);
        }

        .file-input-btn:hover::after {
            opacity: 1;
        }

        .file-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-name {
            margin-top: 8px;
            font-size: 0.85rem;
            color: var(--text-muted);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .submit-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: var(--transition);
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.5);
            background: var(--gradient-light);
        }

        .submit-btn:hover::after {
            opacity: 1;
        }

        .auth-switch {
            text-align: center;
            margin-top: 15px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .auth-switch a {
            color: var(--primary-color);
            font-weight: 500;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .auth-switch a:hover {
            color: var(--primary-light);
            text-decoration: underline;
        }

        /* Discover Modal */
        .discover-list {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 10px;
        }

        .discover-item {
            display: flex;
            padding: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            align-items: center;
            cursor: pointer;
            border-radius: var(--border-radius-sm);
            margin-bottom: 8px;
            background-color: rgba(0, 0, 0, 0.03);
        }

        [data-theme="dark"] .discover-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background-color: rgba(255, 255, 255, 0.03);
        }

        .discover-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .discover-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
            transform: translateX(5px);
        }

        [data-theme="dark"] .discover-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .discover-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-size: 1.1rem;
            box-shadow: var(--shadow-sm);
        }

        .discover-content {
            flex: 1;
        }

        .discover-title {
            font-size: 1rem;
            color: var(--text-dark);
            margin-bottom: 5px;
            font-weight: 600;
        }

        .discover-description {
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 15px 20px;
            border-radius: var(--border-radius-sm);
            background-color: var(--secondary-color);
            color: white;
            box-shadow: var(--shadow-xl);
            transform: translateX(150%);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 3000;
            display: flex;
            align-items: center;
            max-width: 350px;
            border-left: 5px solid var(--primary-color);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background-color: #27ae60;
            border-left-color: #2ecc71;
        }

        .toast.error {
            background-color: #e74c3c;
            border-left-color: #ff4757;
        }

        .toast.warning {
            background-color: #f39c12;
            border-left-color: #f1c40f;
        }

        .toast.info {
            background-color: #3498db;
            border-left-color: #2980b9;
        }

        .toast i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .toast-close {
            margin-left: 15px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s ease;
            font-size: 1rem;
        }

        .toast-close:hover {
            opacity: 1;
        }

        /* Book Status Badges */
        .status-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            border-radius: var(--border-radius-xs);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 1;
            box-shadow: var(--shadow-sm);
        }

        .status-approved {
            background-color: #27ae60;
            color: white;
        }

        .status-pending {
            background-color: #f39c12;
            color: white;
        }

        .status-rejected {
            background-color: #e74c3c;
            color: white;
        }

        /* Book Card Hover Overlay */
        .book-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 15px;
            text-align: center;
            color: white;
        }

        .book-card:hover .book-overlay {
            opacity: 1;
        }

        .book-overlay-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .book-overlay-author {
            font-size: 0.9rem;
            margin-bottom: 12px;
            color: rgba(255, 255, 255, 0.9);
        }

        .book-overlay-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--border-radius-xs);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 8px;
        }

        .book-overlay-btn:hover {
            background: var(--gradient-light);
            transform: translateY(-2px);
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .container {
                padding: 20px;
            }
            
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 15px;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 0 15px;
            }

            .logo {
                font-size: 1.6rem;
            }

            .logo i {
                font-size: 1.3rem;
            }

            .search-container {
                width: 200px;
            }

            .search-container.active {
                width: 250px;
            }

            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .nav-item {
                font-size: 1.2rem;
                width: 45px;
                height: 45px;
            }
            
            .add-btn {
                width: 55px;
                height: 55px;
                font-size: 1.5rem;
            }

            .profile-info h2 {
                font-size: 1.6rem;
            }

            .profile-stats {
                flex-direction: column;
                gap: 12px;
            }

            .stat-item:not(:last-child)::after {
                display: none;
            }

            .stat-item {
                padding: 12px 0;
            }

            .chat-input {
                padding: 12px 15px;
            }

            .send-btn {
                width: 42px;
                height: 42px;
            }

            .book-img-container {
                height: 180px;
            }
        }

        @media (max-width: 576px) {
            .header {
                padding: 0 10px;
                height: var(--header-height);
                flex-direction: row;
                justify-content: space-between;
            }

            .logo {
                font-size: 1.5rem;
            }

            .logo i {
                font-size: 1.2rem;
            }

            .header-actions {
                gap: 10px;
            }

            .search-container {
                position: absolute;
                top: var(--header-height);
                left: 0;
                right: 0;
                width: 100%;
                margin: 0;
                padding: 10px;
                background-color: var(--secondary-color);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                z-index: 999;
                display: none;
            }

            [data-theme="dark"] .search-container {
                background-color: var(--secondary-dark);
            }

            .search-container.active {
                display: block;
                width: 100%;
            }

            .search-input {
                display: block;
                width: 100%;
                padding: 10px 15px 10px 40px;
                border-radius: var(--border-radius);
                background-color: var(--secondary-light);
            }

            .search-results {
                top: calc(100% + 10px);
                left: 10px;
                right: 10px;
                width: auto;
            }

            .books-grid {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .book-img-container {
                height: 150px;
            }

            .profile-info h2 {
                font-size: 1.5rem;
            }

            .profile-bio {
                padding: 15px;
                font-size: 0.9rem;
            }

            .stat-number {
                font-size: 1.6rem;
            }

            .chat-input-container {
                padding: 12px;
            }

            .chat-input {
                padding: 12px 15px;
                margin-right: 10px;
                font-size: 0.95rem;
            }

            .send-btn {
                width: 40px;
                height: 40px;
                font-size: 1.1rem;
            }

            .message-content {
                padding: 10px 14px;
                font-size: 0.95rem;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
            
            .modal-title {
                font-size: 1.5rem;
            }

            .profile-actions {
                flex-direction: column;
                gap: 10px;
            }

            .edit-profile, .logout-btn {
                max-width: 100%;
                width: 100%;
            }

            .profile-avatar {
                width: 100px;
                height: 100px;
                font-size: 2.2rem;
            }
        }

        @media (max-width: 400px) {
            .container {
                padding: 15px 10px;
            }
            
            .page-title {
                font-size: 1.7rem;
            }
            
            .books-grid {
                grid-template-columns: 1fr;
            }

            .profile-info h2 {
                font-size: 1.4rem;
            }
            
            .profile-bio {
                padding: 12px;
            }
            
            .chat-input {
                padding: 10px 14px;
                font-size: 0.9rem;
            }
            
            .modal-content {
                padding: 15px;
            }

            .profile-avatar {
                width: 90px;
                height: 90px;
                font-size: 2rem;
            }
            
            .profile-points {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            background: var(--gradient);
            color: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            align-items: center;
        }

        .points-info {
            text-align: center;
        }

        .points-amount {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .points-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .withdraw-btn {
            background: white;
            color: var(--primary-color);
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow-md);
        }

        .withdraw-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.3);
        }

        .withdraw-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .withdraw-btn i {
            font-size: 1.1rem;
        }

        /* Withdrawal Modal */
        .withdrawal-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .withdrawal-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: var(--border-radius-sm);
            background-color: rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: var(--transition);
        }

        [data-theme="dark"] .withdrawal-option {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .withdrawal-option:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .withdrawal-option:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .withdrawal-option.active {
            border: 2px solid var(--primary-color);
            background-color: rgba(255, 71, 87, 0.1);
        }

        .withdrawal-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-size: 1.1rem;
        }

        .withdrawal-details {
            flex: 1;
        }

        .withdrawal-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-dark);
        }

        .withdrawal-description {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .amount-selection {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .amount-option {
            padding: 12px;
            text-align: center;
            border-radius: var(--border-radius-sm);
            background-color: rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        [data-theme="dark"] .amount-option {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .amount-option:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .amount-option:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .amount-option.active {
            background: var(--gradient);
            color: white;
        }

        .payment-details {
            margin-top: 20px;
            display: none;
        }

        .payment-details.active {
            display: block;
        }

        .withdrawal-history {
            margin-top: 30px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding-top: 20px;
        }

        [data-theme="dark"] .withdrawal-history {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .withdrawal-history-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            font-weight: 600;
        }

        .withdrawal-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: var(--border-radius-sm);
            background-color: rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        [data-theme="dark"] .withdrawal-item {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .withdrawal-info {
            flex: 1;
        }

        .withdrawal-amount {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .withdrawal-method {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .withdrawal-date {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .withdrawal-status {
            padding: 5px 10px;
            border-radius: var(--border-radius-xs);
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background-color: #f39c12;
            color: white;
        }

        .status-completed {
            background-color: #27ae60;
            color: white;
        }

        .status-rejected {
            background-color: #e74c3c;
            color: white;
        }

        /* Point System Info */
        .point-system-info {
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
        }

        [data-theme="dark"] .point-system-info {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .point-system-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            font-weight: 600;
        }

        .point-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .point-item {
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }

        .point-item:last-child {
            border-bottom: none;
        }

        .point-action {
            font-weight: 500;
        }

        .point-value {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .load-more-btn {
    background: var(--gradient);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: var(--border-radius-sm);
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    box-shadow: var(--shadow-md);
    margin: 0 auto;
}

.load-more-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(255, 71, 87, 0.5);
    background: var(--gradient-light);
}

.load-more-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
}
        }
    </style>
</head>
<body data-theme="light">
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <a href="#" class="logo" id="logoLink">
                <i class="fas fa-book-open"></i>
                <span>EduSparK</span>
            </a>
        </div>
        
        <div class="header-actions">
            <button class="theme-toggle">
                <i class="fas fa-sun sun"></i>
                <i class="fas fa-moon moon"></i>
            </button>
            
            <div class="user-avatar" id="userAvatar">
                <span id="avatarInitials">[^]</span>
            </div>
        </div>

        <div class="search-container" id="searchContainer">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="searchInput" placeholder="Search books...">
            <div class="search-results" id="searchResults"></div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <h1 class="page-title" data-aos="fade-right">Discover Books</h1>
        <div class="books-grid" id="booksContainer">
            <!-- Books will be dynamically added here -->
            <div class="empty-state" id="emptyState">
                <i class="fas fa-book-open"></i>
                <h3>No Books Available</h3>
                <p>Be the first to share a book with the community!</p>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item" id="chatBtn">
            <i class="fas fa-comment-dots"></i>
        </div>
        <div class="nav-item active" id="homeBtn">
            <i class="fas fa-home"></i>
        </div>
        <button class="add-btn" id="addBookBtn">
            <i class="fas fa-plus"></i>
        </button>
        <div class="nav-item" id="discoverBtn">
            <i class="fas fa-compass"></i>
        </div>
        <div class="nav-item" id="profileBtn">
            <i class="fas fa-user"></i>
        </div>
    </nav>

    <!-- Full Page Profile -->
     <div class="profile-page" id="profilePage">
        <div class="profile-header">
            <button class="profile-back-btn" id="profileBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="profile-avatar" id="profileAvatar">
                <span id="profileAvatarInitials">U</span>
            </div>
            <div class="profile-info">
                <h2 id="profileName">User</h2>
                <br>
                <p class="profile-username" id="profileUsername">@username</p>
                <p class="profile-email" id="profileEmail"><i class="fas fa-envelope"></i> user@example.com</p>
            </div>
        </div>
        
        <div class="profile-bio" id="profileBio">
            No bio available. Edit your profile to add one.
        </div>
        
        <!-- Points Section -->
        <div class="profile-points">
            <div class="points-info">
                <div class="points-amount" id="userPoints">0</div>
                <div class="points-label">Points Earned</div>
            </div>
            <button class="withdraw-btn" id="withdrawBtn" disabled>
                <i class="fas fa-rupee-sign"></i> Withdraw
            </button>
        </div>

        <!-- Point System Info -->
        <div class="point-system-info">
            <h3 class="point-system-title">Point System</h3>
            <div class="point-item">
                <span class="point-action">Share a New book (2025-2026)</span>
                <span class="point-value">+10 points</span>
            </div>
            <div class="point-item">
                <span class="point-action">Share a Old book (2019-2024)</span>
                <span class="point-value">+5 points</span>
            </div>
            <div class="point-item">
                <span class="point-action">500 points</span>
                <span class="point-value">= ‚Çπ50</span>
            </div>
            <div class="point-item">
                <span class="point-action">1000 points</span>
                <span class="point-value">= ‚Çπ100</span>
            </div>
            <div class="point-item">
                <span class="point-action">2000 points</span>
                <span class="point-value">= ‚Çπ200</span>
            </div>
            <div class="point-item">
                <span class="point-action">5000 points</span>
                <span class="point-value">= ‚Çπ500</span>
            </div>
        </div>
        
        <div class="profile-stats">
            <div class="stat-item">
                <div class="stat-number" id="booksShared">0</div>
                <div class="stat-label">Books Shared</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="booksDownloaded">0</div>
                <div class="stat-label">Books Downloaded</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="memberSince">-</div>
                <div class="stat-label">Member Since</div>
            </div>
        </div>
        
        <div class="load-more-container" id="loadMoreContainer" style="text-align: center; margin-top: 20px;">
    <button class="load-more-btn" id="loadMoreBooksBtn" style="display: none;">
        <i class="fas fa-book-open"></i> Load More Books
    </button>
</div>
        <div class="books-grid" id="profileBooksContainer">
            <div class="empty-state">
                <i class="fas fa-book"></i>
                <h3>No Books Shared Yet</h3>
                <p>Start sharing books with the community!</p>
                
              
            </div>
              
        </div>

        <!-- Withdrawal History -->
        <div class="withdrawal-history" id="withdrawalHistory">
            <h3 class="withdrawal-history-title">Withdrawal History</h3>
            <div class="empty-state" id="emptyWithdrawalHistory">
                <i class="fas fa-wallet"></i>
                <h3>No Withdrawals Yet</h3>
                <p>Withdraw your points to see history here</p>
            </div>
        </div>
        
        <div class="profile-actions">
            <button class="edit-profile" id="editProfileBtn">
                <i class="fas fa-user-edit"></i> Edit Profile
            </button>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <!-- Full Page Chat -->
    <div class="chat-page" id="chatPage">
        <div class="chat-header">
            <button class="chat-back-btn" id="chatBackBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="chat-title">Live Chat</div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="empty-state">
                <i class="fas fa-comments"></i>
                <h3>No Messages Yet</h3>
                <p>Start the conversation with the community!</p>
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <div class="chat-input-container">
            <textarea id="chatInput" class="chat-input" placeholder="Type your message..." rows="1"></textarea>
            <button class="send-btn" id="sendMessageBtn" disabled>
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
    
       <div class="modal" id="withdrawalModal">
        <div class="modal-content">
            <button class="close-modal" id="closeWithdrawalModal">&times;</button>
            <h2 class="modal-title">Withdraw Points</h2>
            
            <div class="withdrawal-options">
                <div class="withdrawal-option" data-method="upi">
                    <div class="withdrawal-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="withdrawal-details">
                        <div class="withdrawal-title">UPI</div>
                        <div class="withdrawal-description">Instant transfer to your UPI ID</div>
                    </div>
                </div>
                <div class="withdrawal-option" data-method="redeem">
    <div class="withdrawal-icon">
        <i class="fab fa-google-play"></i>
    </div>
    <div class="withdrawal-details">
        <div class="withdrawal-title">Redeem Code</div>
        <div class="withdrawal-description">Get Google Play gift card code</div>
    </div>
</div>
                <div class="withdrawal-option" data-method="bank">
                    <div class="withdrawal-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="withdrawal-details">
                        <div class="withdrawal-title">Bank Account</div>
                        <div class="withdrawal-description">Transfer to your bank account</div>
                    </div>
                </div>
                <div class="withdrawal-option" data-method="paytm">
                    <div class="withdrawal-icon">
                        <i class="fab fa-paypal"></i>
                    </div>
                    <div class="withdrawal-details">
                        <div class="withdrawal-title">Paytm</div>
                        <div class="withdrawal-description">Transfer to your Paytm wallet</div>
                    </div>
                </div>
                <div class="withdrawal-option" data-method="phonepay">
                    <div class="withdrawal-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="withdrawal-details">
                        <div class="withdrawal-title">PhonePe</div>
                        <div class="withdrawal-description">Transfer to your PhonePe account</div>
                    </div>
                </div>
            </div>
            
            <div class="amount-selection">
                <div class="amount-option" data-amount="500" data-rs="50">500 points = ‚Çπ50</div>
                <div class="amount-option" data-amount="1000" data-rs="100">1000 points = ‚Çπ100</div>
                <div class="amount-option" data-amount="2000" data-rs="200">2000 points = ‚Çπ200</div>
                <div class="amount-option" data-amount="5000" data-rs="500">5000 points = ‚Çπ500</div>
            </div>
            
            <div class="payment-details" id="paymentDetails">
                <div class="form-group">
                    <label id="paymentMethodLabel">UPI ID</label>
                    <input type="text" id="paymentId" class="form-input" placeholder="Enter your UPI ID" required>
                </div>
                <div class="form-group">
                    <label for="accountName">Account Holder Name</label>
                    <input type="text" id="accountName" class="form-input" placeholder="Enter account holder name" required>
                </div>
                <button type="button" class="submit-btn" id="submitWithdrawalBtn">
                    <span class="spinner" id="withdrawalSpinner" style="display: none;"></span>
                    Request Withdrawal
                </button>
            </div>
        </div>
    </div>

    <!-- Add Book Modal -->
    <div class="modal" id="addBookModal">
        <div class="modal-content">
            <button class="close-modal" id="closeAddBookModal">&times;</button>
            <h2 class="modal-title">Add New Book</h2>
            <form id="addBookForm">
                <div class="form-group">
                    <label for="bookName" class="form-label">Book Name</label>
                    <input type="text" id="bookName" class="form-input" placeholder="Enter book name" required>
                </div>
              
                <div class="form-group">
                    <label for="authorName" class="form-label">Author Name</label>
                    <input type="text" id="authorName" class="form-input" placeholder="Enter author name" required>
                </div>
                <div class="form-group">
                    <label for="bookCategory" class="form-label">Category</label>
                    <input type="text" id="bookCategory" class="form-input" placeholder="Enter book category (e.g., Fiction, Science)" required>
                </div>
                <div class="form-group">
                    <label for="bookImageUrl" class="form-label">Cover Image URL (Optional)</label>
                    <input type="url" id="bookImageUrl" class="form-input" placeholder="Enter image URL for book cover">
                </div>
                <div class="form-group">
                    <label for="driveLink" class="form-label">Google Drive Link</label>
                    <input type="url" id="driveLink" class="form-input" placeholder="Enter Google Drive link" required>
                </div>
                <div class="form-group">
                    <label for="bookDescription" class="form-label">Description (Optional)</label>
                    <textarea id="bookDescription" class="form-input" placeholder="Enter a brief description about the book" rows="3"></textarea>
                </div>
                <button type="submit" class="submit-btn" id="submitBookBtn">
                    <span class="spinner" id="submitSpinner" style="display: none;"></span>
                    Submit for Approval
                </button>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="close-modal" id="closeLoginModal">&times;</button>
            <h2 class="modal-title">Login to EduSparK</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail" class="form-label">Email</label>
                    <input type="email" id="loginEmail" class="form-input" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword" class="form-label">Password</label>
                    <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="submit-btn" id="loginBtn">
                    <span class="spinner" id="loginSpinner" style="display: none;"></span>
                    Login
                </button>
            </form>
            <div class="auth-switch">
                Don't have an account? <a id="switchToSignup">Sign up</a>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <button class="close-modal" id="closeSignupModal">&times;</button>
            <h2 class="modal-title">Create Account</h2>
            <form id="signupForm">
                <div class="form-group">
                    <label for="signupName" class="form-label">Full Name</label>
                    <input type="text" id="signupName" class="form-input" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="signupUsername" class="form-label">Username</label>
                    <input type="text" id="signupUsername" class="form-input" placeholder="Choose a username" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail" class="form-label">Email</label>
                    <input type="email" id="signupEmail" class="form-input" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword" class="form-label">Password</label>
                    <input type="password" id="signupPassword" class="form-input" placeholder="Create a password" required>
                </div>
                <div class="form-group">
                    <label for="signupBio" class="form-label">Bio (Optional)</label>
                    <textarea id="signupBio" class="form-input" placeholder="Tell us about yourself" rows="3"></textarea>
                </div>
                <button type="submit" class="submit-btn" id="signupBtn">
                    <span class="spinner" id="signupSpinner" style="display: none;"></span>
                    Sign Up
                </button>
            </form>
            <div class="auth-switch">
                Already have an account? <a id="switchToLogin">Login</a>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <button class="close-modal" id="closeEditProfileModal">&times;</button>
            <h2 class="modal-title">Edit Profile</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editProfileName" class="form-label">Full Name</label>
                    <input type="text" id="editProfileName" class="form-input" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="editProfileUsername" class="form-label">Username</label>
                    <input type="text" id="editProfileUsername" class="form-input" placeholder="Choose a username" required>
                </div>
                <div class="form-group">
                    <label for="editProfileBio" class="form-label">Bio</label>
                    <textarea id="editProfileBio" class="form-input" placeholder="Tell us about yourself" rows="3"></textarea>
                </div>
                <button type="submit" class="submit-btn" id="saveProfileBtn">
                    <span class="spinner" id="saveProfileSpinner" style="display: none;"></span>
                    Save Changes
                </button>
            </form>
        </div>
    </div>

    <!-- Discover Modal -->
    <div class="modal" id="discoverModal">
        <div class="modal-content">
            <button class="close-modal" id="closeDiscoverModal">&times;</button>
            <h2 class="modal-title">Discover</h2>
            <div class="discover-list" id="discoverList">
                <div class="discover-item">
                    <div class="discover-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="discover-content">
                        <div class="discover-title">Featured Books</div>
                        <div class="discover-description">Explore our curated collection of featured books</div>
                    </div>
                </div>
                <div class="discover-item">
                    <div class="discover-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="discover-content">
                        <div class="discover-title">Top Contributors</div>
                        <div class="discover-description">See who's sharing the most books</div>
                    </div>
                </div>
                <div class="discover-item">
                    <div class="discover-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="discover-content">
                        <div class="discover-title">Popular This Week</div>
                        <div class="discover-description">Most downloaded books this week</div>
                    </div>
                </div>
                <div class="discover-item">
                    <div class="discover-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="discover-content">
                        <div class="discover-title">New Releases</div>
                        <div class="discover-description">Recently added books to the platform</div>
                    </div>
                </div>
                <div class="discover-item">
                    <div class="discover-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="discover-content">
                        <div class="discover-title">Educational Resources</div>
                        <div class="discover-description">Textbooks and academic materials</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
     const _0x185cc4=_0x4c52;(function(_0x4894c8,_0x13f8c0){const _0x5916c6=_0x4c52,_0x4f0095=_0x4894c8();while(!![]){try{const _0xe311c8=-parseInt(_0x5916c6(0x11d))/0x1*(parseInt(_0x5916c6(0xec))/0x2)+parseInt(_0x5916c6(0x1b0))/0x3+-parseInt(_0x5916c6(0x1d4))/0x4*(-parseInt(_0x5916c6(0x10a))/0x5)+parseInt(_0x5916c6(0x1d5))/0x6+parseInt(_0x5916c6(0x24f))/0x7+parseInt(_0x5916c6(0x167))/0x8*(parseInt(_0x5916c6(0x182))/0x9)+-parseInt(_0x5916c6(0x1f2))/0xa;if(_0xe311c8===_0x13f8c0)break;else _0x4f0095['push'](_0x4f0095['shift']());}catch(_0x4599a5){_0x4f0095['push'](_0x4f0095['shift']());}}}(_0x174d,0x681ef));function hi(){const _0x48b7c1=_0x4c52;console[_0x48b7c1(0x109)]('Hello\x20World!');}hi(),AOS[_0x185cc4(0x16e)]({'duration':0x320,'easing':_0x185cc4(0x187),'once':!![],'offset':0x64});const firebaseConfig={'apiKey':_0x185cc4(0x1c4),'authDomain':'eduspark-books.firebaseapp.com','databaseURL':_0x185cc4(0x256),'projectId':'eduspark-books','storageBucket':_0x185cc4(0x133),'messagingSenderId':_0x185cc4(0x208),'appId':'1:977405961718:web:4f9d16cf0a44e1f54e93d7','measurementId':_0x185cc4(0xfe)};firebase[_0x185cc4(0x1d6)](firebaseConfig);const auth=firebase['auth'](),db=firebase[_0x185cc4(0x149)](),storage=firebase[_0x185cc4(0x1cc)](),themeToggle=document[_0x185cc4(0x1c0)](_0x185cc4(0x235)),body=document['body'],header=document[_0x185cc4(0x1c0)](_0x185cc4(0x1fb)),logoLink=document[_0x185cc4(0x231)]('logoLink'),userAvatar=document[_0x185cc4(0x231)](_0x185cc4(0x214)),avatarInitials=document['getElementById'](_0x185cc4(0x12c)),searchContainer=document['getElementById'](_0x185cc4(0x1a4)),searchInput=document[_0x185cc4(0x231)](_0x185cc4(0x1a9)),searchResults=document['getElementById']('searchResults'),addBookBtn=document['getElementById'](_0x185cc4(0x17d)),addBookModal=document[_0x185cc4(0x231)](_0x185cc4(0x16c)),closeAddBookModal=document['getElementById'](_0x185cc4(0x1b3)),addBookForm=document[_0x185cc4(0x231)](_0x185cc4(0x22c)),booksContainer=document[_0x185cc4(0x231)](_0x185cc4(0x123)),emptyState=document[_0x185cc4(0x231)](_0x185cc4(0x102)),profileBtn=document['getElementById']('profileBtn'),profilePage=document[_0x185cc4(0x231)]('profilePage'),profileBackBtn=document[_0x185cc4(0x231)](_0x185cc4(0x115)),chatBtn=document[_0x185cc4(0x231)](_0x185cc4(0x121)),chatPage=document[_0x185cc4(0x231)]('chatPage'),chatBackBtn=document[_0x185cc4(0x231)](_0x185cc4(0x236)),chatMessages=document[_0x185cc4(0x231)](_0x185cc4(0x23d)),chatInput=document[_0x185cc4(0x231)]('chatInput'),sendMessageBtn=document['getElementById'](_0x185cc4(0x124)),typingIndicator=document['getElementById'](_0x185cc4(0x1c6)),loginModal=document['getElementById'](_0x185cc4(0x173)),signupModal=document[_0x185cc4(0x231)]('signupModal'),closeLoginModal=document[_0x185cc4(0x231)]('closeLoginModal'),closeSignupModal=document['getElementById'](_0x185cc4(0x105)),loginForm=document[_0x185cc4(0x231)]('loginForm'),signupForm=document['getElementById'](_0x185cc4(0x1c9)),switchToSignup=document[_0x185cc4(0x231)](_0x185cc4(0x25b)),switchToLogin=document[_0x185cc4(0x231)](_0x185cc4(0x11b)),editProfileBtn=document[_0x185cc4(0x231)](_0x185cc4(0x189)),editProfileModal=document[_0x185cc4(0x231)](_0x185cc4(0x1cd)),closeEditProfileModal=document[_0x185cc4(0x231)](_0x185cc4(0xf0)),editProfileForm=document['getElementById'](_0x185cc4(0xed)),profileName=document[_0x185cc4(0x231)]('profileName'),profileUsername=document[_0x185cc4(0x231)](_0x185cc4(0xee)),profileEmail=document[_0x185cc4(0x231)](_0x185cc4(0xff)),profileBio=document[_0x185cc4(0x231)](_0x185cc4(0x22a)),booksShared=document[_0x185cc4(0x231)]('booksShared'),booksDownloaded=document[_0x185cc4(0x231)](_0x185cc4(0x18f)),memberSince=document[_0x185cc4(0x231)](_0x185cc4(0x20f)),profileBooksContainer=document[_0x185cc4(0x231)]('profileBooksContainer'),discoverBtn=document[_0x185cc4(0x231)](_0x185cc4(0x106)),discoverModal=document[_0x185cc4(0x231)](_0x185cc4(0x11a)),closeDiscoverModal=document[_0x185cc4(0x231)](_0x185cc4(0x17e)),discoverList=document[_0x185cc4(0x231)]('discoverList'),logoutBtn=document[_0x185cc4(0x231)]('logoutBtn'),profileAvatar=document['getElementById'](_0x185cc4(0x1c5)),profileAvatarInitials=document[_0x185cc4(0x231)](_0x185cc4(0x1d9)),userPoints=document[_0x185cc4(0x231)](_0x185cc4(0x193)),withdrawBtn=document['getElementById'](_0x185cc4(0x12e)),withdrawalModal=document['getElementById']('withdrawalModal'),closeWithdrawalModal=document[_0x185cc4(0x231)]('closeWithdrawalModal'),withdrawalOptions=document[_0x185cc4(0x1a0)](_0x185cc4(0x118)),amountOptions=document[_0x185cc4(0x1a0)]('.amount-option'),paymentDetails=document[_0x185cc4(0x231)]('paymentDetails'),paymentMethodLabel=document[_0x185cc4(0x231)](_0x185cc4(0x164)),paymentId=document[_0x185cc4(0x231)]('paymentId'),accountName=document['getElementById'](_0x185cc4(0x14a)),submitWithdrawalBtn=document[_0x185cc4(0x231)](_0x185cc4(0x1ba)),withdrawalHistory=document[_0x185cc4(0x231)]('withdrawalHistory'),emptyWithdrawalHistory=document['getElementById'](_0x185cc4(0x211));let booksLimit=0x3,lastBook=null;const batchSize=0xa;let lastBookSnapshot=null,hasMoreBooks=![],currentUser=null,userData=null,isTyping=![],typingTimeout=null,lastTypingTime=0x0,allBooks=[],selectedWithdrawalMethod=null,selectedWithdrawalAmount=null,selectedWithdrawalRs=null;window[_0x185cc4(0xfa)]('scroll',()=>{const _0x6519dd=_0x185cc4;window[_0x6519dd(0x21b)]>0x32?header[_0x6519dd(0x19a)][_0x6519dd(0x259)]('scrolled'):header['classList'][_0x6519dd(0x203)](_0x6519dd(0x252));}),themeToggle[_0x185cc4(0xfa)]('click',()=>{const _0x2efec5=_0x185cc4,_0x15b7ca=body[_0x2efec5(0x24e)](_0x2efec5(0x213)),_0x1c4d57=_0x15b7ca===_0x2efec5(0x1a1)?'dark':'light';body[_0x2efec5(0x238)](_0x2efec5(0x213),_0x1c4d57),localStorage[_0x2efec5(0x1ab)](_0x2efec5(0x163),_0x1c4d57);});const savedTheme=localStorage[_0x185cc4(0x18c)](_0x185cc4(0x163));savedTheme&&body[_0x185cc4(0x238)](_0x185cc4(0x213),savedTheme);searchInput[_0x185cc4(0xfa)](_0x185cc4(0x181),function(){const _0x37cc5b=_0x185cc4,_0x49496f=this[_0x37cc5b(0x107)][_0x37cc5b(0x247)]()[_0x37cc5b(0x202)]();if(_0x49496f[_0x37cc5b(0x172)]===0x0){searchResults['style'][_0x37cc5b(0x1e8)]='none';return;}const _0x147595=allBooks[_0x37cc5b(0x14f)](_0x1567d0=>_0x1567d0['bookName'][_0x37cc5b(0x202)]()[_0x37cc5b(0x1bd)](_0x49496f)||_0x1567d0[_0x37cc5b(0x223)][_0x37cc5b(0x202)]()[_0x37cc5b(0x1bd)](_0x49496f)||_0x1567d0[_0x37cc5b(0x20b)]&&_0x1567d0['category']['toLowerCase']()[_0x37cc5b(0x1bd)](_0x49496f));renderSearchResults(_0x147595);});if(window[_0x185cc4(0x1e6)]<=0x240){const searchIcon=document['createElement']('i');searchIcon[_0x185cc4(0x248)]=_0x185cc4(0x23e),searchIcon[_0x185cc4(0x1c1)]['fontSize']=_0x185cc4(0x18a),searchIcon[_0x185cc4(0x1c1)][_0x185cc4(0x204)]='var(--text-light)',searchIcon[_0x185cc4(0x1c1)][_0x185cc4(0x156)]=_0x185cc4(0x10e),searchIcon[_0x185cc4(0x1c1)][_0x185cc4(0x10d)]='10px',searchIcon[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>{const _0x24e93d=_0x185cc4;searchContainer['style'][_0x24e93d(0x1e8)]=_0x24e93d(0x127),searchInput[_0x24e93d(0x10f)]();}),document[_0x185cc4(0x1c0)]('.header-actions')[_0x185cc4(0x245)](searchIcon,themeToggle),searchContainer[_0x185cc4(0x1c1)][_0x185cc4(0x1e8)]=_0x185cc4(0x221);}function renderSearchResults(_0x35aabc){const _0xb0bc5e=_0x185cc4;searchResults[_0xb0bc5e(0x25d)]='';if(_0x35aabc[_0xb0bc5e(0x172)]===0x0){searchResults[_0xb0bc5e(0x25d)]=_0xb0bc5e(0x168),searchResults[_0xb0bc5e(0x1c1)][_0xb0bc5e(0x1e8)]=_0xb0bc5e(0x127);return;}_0x35aabc[_0xb0bc5e(0xfb)](0x0,0x5)[_0xb0bc5e(0x157)](_0x15412a=>{const _0x29f4e0=_0xb0bc5e,_0x4d269e=document[_0x29f4e0(0x120)](_0x29f4e0(0x1ac));_0x4d269e[_0x29f4e0(0x248)]=_0x29f4e0(0x22e),_0x4d269e[_0x29f4e0(0x25d)]=_0x29f4e0(0x196)+_0x15412a[_0x29f4e0(0x227)]+_0x29f4e0(0x1a2)+_0x15412a['authorName']+(_0x15412a[_0x29f4e0(0x20b)]?'\x20‚Ä¢\x20'+_0x15412a[_0x29f4e0(0x20b)]:'')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4d269e[_0x29f4e0(0xfa)](_0x29f4e0(0x170),()=>{const _0x23a41a=_0x29f4e0,_0x29d04e=document[_0x23a41a(0x1c0)](_0x23a41a(0x251)+_0x15412a['id']+'\x22]');_0x29d04e&&(_0x29d04e[_0x23a41a(0x225)]({'behavior':_0x23a41a(0x24b),'block':_0x23a41a(0x244)}),_0x29d04e[_0x23a41a(0x19a)][_0x23a41a(0x259)]('highlight'),setTimeout(()=>{const _0x857e0f=_0x23a41a;_0x29d04e[_0x857e0f(0x19a)][_0x857e0f(0x203)](_0x857e0f(0x24c));},0x7d0)),searchInput[_0x23a41a(0x107)]='',searchResults[_0x23a41a(0x1c1)][_0x23a41a(0x1e8)]=_0x23a41a(0x221),window[_0x23a41a(0x1e6)]<=0x240&&(searchContainer[_0x23a41a(0x1c1)][_0x23a41a(0x1e8)]='none');}),searchResults[_0x29f4e0(0x205)](_0x4d269e);}),searchResults[_0xb0bc5e(0x1c1)][_0xb0bc5e(0x1e8)]='block';}document[_0x185cc4(0xfa)](_0x185cc4(0x170),_0x254101=>{const _0x10ef74=_0x185cc4;!searchContainer[_0x10ef74(0x138)](_0x254101[_0x10ef74(0x19d)])&&_0x254101[_0x10ef74(0x19d)][_0x10ef74(0x248)]!=='fa-search'&&(searchResults[_0x10ef74(0x1c1)][_0x10ef74(0x1e8)]=_0x10ef74(0x221));});function openProfilePage(){const _0x299a8c=_0x185cc4;profilePage[_0x299a8c(0x19a)][_0x299a8c(0x259)](_0x299a8c(0x12d)),document[_0x299a8c(0x137)][_0x299a8c(0x1c1)][_0x299a8c(0x230)]=_0x299a8c(0x11e),fetchUserBooks();}function closeProfilePage(){const _0x8a38cd=_0x185cc4;profilePage['classList'][_0x8a38cd(0x203)](_0x8a38cd(0x12d)),document[_0x8a38cd(0x137)][_0x8a38cd(0x1c1)][_0x8a38cd(0x230)]=_0x8a38cd(0x1ff);}function openChatPage(){const _0x45d662=_0x185cc4;chatPage[_0x45d662(0x19a)][_0x45d662(0x259)]('active'),document[_0x45d662(0x137)][_0x45d662(0x1c1)][_0x45d662(0x230)]=_0x45d662(0x11e),chatInput['focus']();}function closeChatPage(){const _0x4287d4=_0x185cc4;chatPage['classList'][_0x4287d4(0x203)](_0x4287d4(0x12d)),document[_0x4287d4(0x137)][_0x4287d4(0x1c1)][_0x4287d4(0x230)]='auto';}profileBtn['addEventListener']('click',()=>{if(!currentUser){openModal(loginModal);return;}openProfilePage();}),profileBackBtn[_0x185cc4(0xfa)](_0x185cc4(0x170),closeProfilePage),chatBtn['addEventListener'](_0x185cc4(0x170),()=>{if(!currentUser){openModal(loginModal);return;}openChatPage();}),chatBackBtn['addEventListener'](_0x185cc4(0x170),closeChatPage),userAvatar[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>{if(!currentUser){openModal(loginModal);return;}openProfilePage();}),logoLink[_0x185cc4(0xfa)](_0x185cc4(0x170),_0x20e9a7=>{const _0x369b63=_0x185cc4;_0x20e9a7[_0x369b63(0x1c8)](),window[_0x369b63(0x10b)]({'top':0x0,'behavior':_0x369b63(0x24b)});});function openModal(_0xdceb54){const _0x36ade4=_0x185cc4;_0xdceb54[_0x36ade4(0x19a)][_0x36ade4(0x259)](_0x36ade4(0x12d)),document[_0x36ade4(0x137)][_0x36ade4(0x1c1)][_0x36ade4(0x230)]=_0x36ade4(0x11e);}function closeModal(_0x42fac0){const _0x23ade2=_0x185cc4;_0x42fac0[_0x23ade2(0x19a)][_0x23ade2(0x203)](_0x23ade2(0x12d)),document[_0x23ade2(0x137)][_0x23ade2(0x1c1)][_0x23ade2(0x230)]='auto';}addBookBtn[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>{if(!currentUser){openModal(loginModal);return;}addBookForm['reset'](),openModal(addBookModal);}),closeAddBookModal[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>closeModal(addBookModal)),closeLoginModal[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>closeModal(loginModal)),closeSignupModal['addEventListener'](_0x185cc4(0x170),()=>closeModal(signupModal)),switchToSignup[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>{closeModal(loginModal),openModal(signupModal);}),switchToLogin['addEventListener'](_0x185cc4(0x170),()=>{closeModal(signupModal),openModal(loginModal);}),editProfileBtn[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>{const _0x32030c=_0x185cc4;closeProfilePage(),openModal(editProfileModal),document[_0x32030c(0x231)](_0x32030c(0x1a7))[_0x32030c(0x107)]=userData?.['name']||'',document['getElementById'](_0x32030c(0x130))[_0x32030c(0x107)]=userData?.[_0x32030c(0x1da)]||'',document[_0x32030c(0x231)](_0x32030c(0x169))['value']=userData?.[_0x32030c(0x151)]||'';}),closeEditProfileModal['addEventListener'](_0x185cc4(0x170),()=>{closeModal(editProfileModal),openProfilePage();}),discoverBtn['addEventListener']('click',()=>{if(!currentUser){openModal(loginModal);return;}openModal(discoverModal);}),closeDiscoverModal[_0x185cc4(0xfa)]('click',()=>closeModal(discoverModal)),document['querySelectorAll'](_0x185cc4(0x21e))[_0x185cc4(0x157)](_0x1cc03f=>{const _0x4a27e0=_0x185cc4;_0x1cc03f[_0x4a27e0(0xfa)](_0x4a27e0(0x170),_0xc695fb=>{_0xc695fb['target']===_0x1cc03f&&closeModal(_0x1cc03f);});}),chatInput[_0x185cc4(0xfa)](_0x185cc4(0x181),function(){const _0x6e55f9=_0x185cc4;this['style'][_0x6e55f9(0x18d)]=_0x6e55f9(0x1ff),this[_0x6e55f9(0x1c1)]['height']=this['scrollHeight']+'px',sendMessageBtn[_0x6e55f9(0x194)]=this[_0x6e55f9(0x107)][_0x6e55f9(0x247)]()==='';}),addBookForm[_0x185cc4(0xfa)](_0x185cc4(0x1f3),async _0x1fdc6e=>{const _0x3a4e00=_0x185cc4;_0x1fdc6e[_0x3a4e00(0x1c8)]();if(!currentUser){showToast(_0x3a4e00(0x20d),_0x3a4e00(0x240));return;}const _0x5e4d69=document[_0x3a4e00(0x231)]('submitBookBtn'),_0x1a4540=document[_0x3a4e00(0x231)](_0x3a4e00(0xf9));_0x5e4d69[_0x3a4e00(0x194)]=!![],_0x1a4540[_0x3a4e00(0x1c1)][_0x3a4e00(0x1e8)]=_0x3a4e00(0x184);const _0x143d32=document[_0x3a4e00(0x231)](_0x3a4e00(0x227))[_0x3a4e00(0x107)],_0x3af82e=document['getElementById'](_0x3a4e00(0x223))[_0x3a4e00(0x107)],_0x963701=document[_0x3a4e00(0x231)](_0x3a4e00(0x161))['value'],_0x3e4b26=document[_0x3a4e00(0x231)](_0x3a4e00(0x25c))[_0x3a4e00(0x107)],_0x2da6dd=document[_0x3a4e00(0x231)](_0x3a4e00(0x159))[_0x3a4e00(0x107)],_0x5cfbf6=document['getElementById'](_0x3a4e00(0x192))[_0x3a4e00(0x107)];try{if(!_0x2da6dd[_0x3a4e00(0x1bd)](_0x3a4e00(0x239)))throw new Error(_0x3a4e00(0x140));await db[_0x3a4e00(0x15e)]('books')[_0x3a4e00(0x259)]({'bookName':_0x143d32,'authorName':_0x3af82e,'category':_0x963701,'imageUrl':_0x3e4b26||null,'description':_0x5cfbf6,'driveLink':_0x2da6dd,'submittedBy':currentUser['uid'],'submittedByName':userData?.[_0x3a4e00(0x216)]||_0x3a4e00(0x20e),'submittedAt':firebase[_0x3a4e00(0x149)][_0x3a4e00(0x1f9)][_0x3a4e00(0x246)](),'status':'pending','adminNotes':'','reviewedBy':'','reviewedAt':null,'rejectionReason':'','downloads':0x0}),await db[_0x3a4e00(0x15e)](_0x3a4e00(0x1b9))[_0x3a4e00(0x16f)](currentUser[_0x3a4e00(0x229)])[_0x3a4e00(0x186)]({'booksShared':firebase['firestore'][_0x3a4e00(0x1f9)][_0x3a4e00(0x155)](0x0)}),userData[_0x3a4e00(0x158)]=userData[_0x3a4e00(0x158)]+0x1,booksShared['textContent']=userData[_0x3a4e00(0x158)],showToast(_0x3a4e00(0x12b),'success'),addBookForm['reset'](),closeModal(addBookModal);}catch(_0x5572e0){console[_0x3a4e00(0x240)](_0x3a4e00(0x14d),_0x5572e0),showToast(_0x3a4e00(0x1ea)+_0x5572e0['message'],'error');}finally{_0x5e4d69[_0x3a4e00(0x194)]=![],_0x1a4540['style'][_0x3a4e00(0x1e8)]=_0x3a4e00(0x221);}});function setupDownloadButtons(){const _0x196888=_0x185cc4;document[_0x196888(0x1a0)](_0x196888(0x234))['forEach'](_0x8308a4=>{const _0x337328=_0x196888;_0x8308a4[_0x337328(0xfa)](_0x337328(0x170),async _0x5715bf=>{const _0x28d0cf=_0x337328;if(!currentUser){openModal(loginModal);return;}const _0x58a110=_0x5715bf[_0x28d0cf(0x1c2)][_0x28d0cf(0x24e)](_0x28d0cf(0x1ae));window[_0x28d0cf(0x11c)](_0x58a110,'_blank');const _0x5679de=_0x5715bf['currentTarget'][_0x28d0cf(0x197)](_0x28d0cf(0x10c))?.['getAttribute'](_0x28d0cf(0x18e));if(_0x5679de)try{await db[_0x28d0cf(0x15e)]('books')[_0x28d0cf(0x16f)](_0x5679de)[_0x28d0cf(0x186)]({'downloads':firebase[_0x28d0cf(0x149)]['FieldValue']['increment'](0x1)}),await db[_0x28d0cf(0x15e)](_0x28d0cf(0x1b9))[_0x28d0cf(0x16f)](currentUser[_0x28d0cf(0x229)])[_0x28d0cf(0x186)]({'booksDownloaded':firebase[_0x28d0cf(0x149)][_0x28d0cf(0x1f9)][_0x28d0cf(0x155)](0x1)});}catch(_0x491596){console[_0x28d0cf(0x240)](_0x28d0cf(0x1d0),_0x491596);}});});}function setupBookApprovalListener(){const _0x4675d4=_0x185cc4;if(!currentUser)return;db[_0x4675d4(0x15e)](_0x4675d4(0x17f))[_0x4675d4(0x21f)](_0x4675d4(0x20c),'==',currentUser['uid'])[_0x4675d4(0x21f)](_0x4675d4(0x1f8),'in',[_0x4675d4(0x18b),_0x4675d4(0x13c)])['onSnapshot'](_0x570d75=>{const _0xdb7517=_0x4675d4;_0x570d75[_0xdb7517(0x1fa)]()[_0xdb7517(0x157)](_0x550a3f=>{const _0xa20cae=_0xdb7517,_0x565fc7=_0x550a3f[_0xa20cae(0x16f)][_0xa20cae(0x110)](),_0x4b6cfd=_0x550a3f[_0xa20cae(0x16f)]['id'];if(_0x550a3f[_0xa20cae(0x12f)]===_0xa20cae(0x21d)&&_0x565fc7[_0xa20cae(0x1f8)]===_0xa20cae(0x18b)){const _0x3682fd=JSON[_0xa20cae(0x1f4)](localStorage[_0xa20cae(0x18c)](_0xa20cae(0x16d))||'{}');!_0x3682fd[_0x4b6cfd]&&db[_0xa20cae(0x15e)](_0xa20cae(0x23f))[_0xa20cae(0x16f)](currentUser[_0xa20cae(0x229)])[_0xa20cae(0x186)]({'points':firebase[_0xa20cae(0x149)]['FieldValue']['increment'](0x0)})['then'](()=>{const _0x18124f=_0xa20cae;userData[_0x18124f(0x23a)]=userData['points'],userPoints['textContent']=userData[_0x18124f(0x23a)],withdrawBtn[_0x18124f(0x194)]=userData[_0x18124f(0x23a)]<0x1f4,_0x3682fd[_0x4b6cfd]=!![],localStorage[_0x18124f(0x1ab)]('processedApprovals',JSON['stringify'](_0x3682fd)),showToast(_0x18124f(0x135),_0x18124f(0x119));});}});});}function showToast(_0x144fe6,_0x2a4f84=_0x185cc4(0x13e)){const _0x150c84=_0x185cc4,_0x22d4af=document[_0x150c84(0x120)](_0x150c84(0x1ac));_0x22d4af['className']=_0x150c84(0xf1)+_0x2a4f84;let _0x4b2fdf='';switch(_0x2a4f84){case _0x150c84(0x119):_0x4b2fdf=_0x150c84(0x1df);break;case'error':_0x4b2fdf=_0x150c84(0x222);break;case _0x150c84(0x19e):_0x4b2fdf=_0x150c84(0x162);break;default:_0x4b2fdf='fa-info-circle';}_0x22d4af[_0x150c84(0x25d)]=_0x150c84(0x25a)+_0x4b2fdf+_0x150c84(0x139)+_0x144fe6+_0x150c84(0x132);const _0x31c1c3=_0x22d4af[_0x150c84(0x1c0)](_0x150c84(0x1eb));_0x31c1c3[_0x150c84(0xfa)](_0x150c84(0x170),()=>{const _0x52a280=_0x150c84;_0x22d4af[_0x52a280(0x203)]();}),document['body']['appendChild'](_0x22d4af),setTimeout(()=>{const _0x3b6675=_0x150c84;_0x22d4af['classList'][_0x3b6675(0x259)](_0x3b6675(0x15f));},0xa),setTimeout(()=>{const _0x1c1c1d=_0x150c84;_0x22d4af[_0x1c1c1d(0x19a)]['remove'](_0x1c1c1d(0x15f)),setTimeout(()=>{const _0x2fda87=_0x1c1c1d;_0x22d4af[_0x2fda87(0x203)]();},0x12c);},0x1388);}loginForm[_0x185cc4(0xfa)]('submit',async _0x2aed62=>{const _0x28c6a9=_0x185cc4;_0x2aed62[_0x28c6a9(0x1c8)]();const _0x58ab5c=document['getElementById'](_0x28c6a9(0x1d3)),_0x1a8399=document[_0x28c6a9(0x231)]('loginSpinner');_0x58ab5c[_0x28c6a9(0x194)]=!![],_0x1a8399[_0x28c6a9(0x1c1)]['display']=_0x28c6a9(0x184);const _0x28e0a7=document[_0x28c6a9(0x231)](_0x28c6a9(0x1a3))[_0x28c6a9(0x107)],_0x2b3965=document[_0x28c6a9(0x231)](_0x28c6a9(0x1db))[_0x28c6a9(0x107)];try{await auth[_0x28c6a9(0x1ec)](_0x28e0a7,_0x2b3965),closeModal(loginModal),showToast('Logged\x20in\x20successfully!',_0x28c6a9(0x119));}catch(_0x2c40e4){console[_0x28c6a9(0x240)](_0x28c6a9(0x126),_0x2c40e4),showToast(_0x28c6a9(0x112)+_0x2c40e4[_0x28c6a9(0x143)],_0x28c6a9(0x240));}finally{_0x58ab5c[_0x28c6a9(0x194)]=![],_0x1a8399['style'][_0x28c6a9(0x1e8)]='none';}}),signupForm[_0x185cc4(0xfa)](_0x185cc4(0x1f3),async _0x1164a1=>{const _0xec7217=_0x185cc4;_0x1164a1['preventDefault']();const _0x56939d=document[_0xec7217(0x231)](_0xec7217(0x1b6)),_0x3c80b4=document[_0xec7217(0x231)]('signupSpinner');_0x56939d['disabled']=!![],_0x3c80b4['style'][_0xec7217(0x1e8)]=_0xec7217(0x184);const _0x3ce885=document['getElementById'](_0xec7217(0xf3))['value'],_0x57806a=document[_0xec7217(0x231)](_0xec7217(0x201))[_0xec7217(0x107)],_0x5036ea=document[_0xec7217(0x231)]('signupEmail')[_0xec7217(0x107)],_0x3a74b5=document['getElementById'](_0xec7217(0x179))[_0xec7217(0x107)],_0x29a8cf=document[_0xec7217(0x231)](_0xec7217(0x1fd))['value'];try{const _0x217970=await auth['createUserWithEmailAndPassword'](_0x5036ea,_0x3a74b5);await db['collection'](_0xec7217(0x1b9))['doc'](_0x217970[_0xec7217(0x23f)][_0xec7217(0x229)])[_0xec7217(0x1e7)]({'name':_0x3ce885,'username':_0x57806a,'email':_0x5036ea,'bio':_0x29a8cf,'createdAt':firebase[_0xec7217(0x149)][_0xec7217(0x1f9)]['serverTimestamp'](),'booksShared':0x0,'booksDownloaded':0x0,'role':_0xec7217(0x23f),'lastActive':firebase['firestore'][_0xec7217(0x1f9)][_0xec7217(0x246)](),'status':_0xec7217(0x12d)}),closeModal(signupModal),showToast('Account\x20created\x20successfully!',_0xec7217(0x119));}catch(_0x5623e1){console[_0xec7217(0x240)](_0xec7217(0x198),_0x5623e1),showToast(_0xec7217(0x16a)+_0x5623e1['message'],_0xec7217(0x240));}finally{_0x56939d[_0xec7217(0x194)]=![],_0x3c80b4[_0xec7217(0x1c1)][_0xec7217(0x1e8)]='none';}}),editProfileForm[_0x185cc4(0xfa)](_0x185cc4(0x1f3),async _0x264dda=>{const _0x3f97d9=_0x185cc4;_0x264dda[_0x3f97d9(0x1c8)]();if(!currentUser)return;const _0x2dbf2f=document[_0x3f97d9(0x231)](_0x3f97d9(0x1b5)),_0x9b172e=document['getElementById'](_0x3f97d9(0x226));_0x2dbf2f[_0x3f97d9(0x194)]=!![],_0x9b172e[_0x3f97d9(0x1c1)][_0x3f97d9(0x1e8)]='inline-block';const _0x34d1b7=document['getElementById'](_0x3f97d9(0x1a7))['value'],_0x5c4142=document[_0x3f97d9(0x231)](_0x3f97d9(0x130))[_0x3f97d9(0x107)],_0x4d27cd=document['getElementById'](_0x3f97d9(0x169))[_0x3f97d9(0x107)];try{const _0x4520da={'name':_0x34d1b7,'username':_0x5c4142,'bio':_0x4d27cd,'updatedAt':firebase[_0x3f97d9(0x149)][_0x3f97d9(0x1f9)][_0x3f97d9(0x246)]()};await db[_0x3f97d9(0x15e)](_0x3f97d9(0x1b9))[_0x3f97d9(0x16f)](currentUser[_0x3f97d9(0x229)])['update'](_0x4520da),userData={...userData,..._0x4520da},updateProfileUI(),closeModal(editProfileModal),openProfilePage(),showToast('Profile\x20updated\x20successfully!',_0x3f97d9(0x119));}catch(_0xebccbf){console['error'](_0x3f97d9(0x1d8),_0xebccbf),showToast(_0x3f97d9(0x255)+_0xebccbf['message'],_0x3f97d9(0x240));}finally{_0x2dbf2f[_0x3f97d9(0x194)]=![],_0x9b172e[_0x3f97d9(0x1c1)][_0x3f97d9(0x1e8)]=_0x3f97d9(0x221);}}),logoutBtn['addEventListener']('click',async()=>{const _0x2033dc=_0x185cc4;try{await auth[_0x2033dc(0x190)](),closeProfilePage(),showToast('Logged\x20out\x20successfully',_0x2033dc(0x119));}catch(_0x4041bb){console[_0x2033dc(0x240)](_0x2033dc(0x177),_0x4041bb),showToast(_0x2033dc(0x1ef),'error');}});function updateTyping(){const _0x40a854=_0x185cc4;if(!currentUser)return;!isTyping&&(isTyping=!![],db[_0x40a854(0x15e)](_0x40a854(0x12a))['doc'](currentUser[_0x40a854(0x229)])[_0x40a854(0x1e7)]({'userId':currentUser[_0x40a854(0x229)],'userName':userData?.[_0x40a854(0x216)]||_0x40a854(0x20e),'typing':!![],'timestamp':firebase[_0x40a854(0x149)][_0x40a854(0x1f9)][_0x40a854(0x246)]()})),lastTypingTime=Date[_0x40a854(0x165)](),typingTimeout&&clearTimeout(typingTimeout),typingTimeout=setTimeout(()=>{const _0x3cbe7b=_0x40a854,_0x416237=Date[_0x3cbe7b(0x165)](),_0x142006=_0x416237-lastTypingTime;_0x142006>=0x7d0&&isTyping&&(db[_0x3cbe7b(0x15e)](_0x3cbe7b(0x12a))['doc'](currentUser['uid'])[_0x3cbe7b(0x1e7)]({'userId':currentUser[_0x3cbe7b(0x229)],'userName':userData?.[_0x3cbe7b(0x216)]||_0x3cbe7b(0x20e),'typing':![],'timestamp':firebase[_0x3cbe7b(0x149)][_0x3cbe7b(0x1f9)][_0x3cbe7b(0x246)]()},{'merge':!![]}),isTyping=![]);},0x7d0);}function setupTypingListener(){const _0x5f5dc0=_0x185cc4;db[_0x5f5dc0(0x15e)]('typing')[_0x5f5dc0(0x21f)](_0x5f5dc0(0x12a),'==',!![])[_0x5f5dc0(0x22d)](_0x3a8102=>{const _0x2ccc61=_0x5f5dc0,_0x17ab3f=[];_0x3a8102[_0x2ccc61(0x157)](_0x1d6825=>{const _0x3a31ac=_0x2ccc61;_0x1d6825[_0x3a31ac(0x110)]()[_0x3a31ac(0x108)]!==currentUser[_0x3a31ac(0x229)]&&_0x17ab3f[_0x3a31ac(0x24a)](_0x1d6825[_0x3a31ac(0x110)]());}),_0x17ab3f['length']>0x0?(typingIndicator[_0x2ccc61(0x19a)]['add']('active'),typingIndicator['innerHTML']=_0x2ccc61(0x1bc)+_0x17ab3f[0x0][_0x2ccc61(0x23b)]+_0x2ccc61(0x1bf)):typingIndicator['classList'][_0x2ccc61(0x203)](_0x2ccc61(0x12d));});}sendMessageBtn[_0x185cc4(0xfa)](_0x185cc4(0x170),async()=>{const _0x42ef57=_0x185cc4,_0x7531c=chatInput[_0x42ef57(0x107)]['trim']();if(!_0x7531c||!currentUser)return;const _0x4e00ad=_0x42ef57(0x13d)+Date[_0x42ef57(0x165)](),_0x4ef6a5=createMessageElement({'id':_0x4e00ad,'text':_0x7531c,'senderId':currentUser[_0x42ef57(0x229)],'senderName':userData?.['name']||_0x42ef57(0x20e),'status':'sending','createdAt':new Date()});chatMessages['appendChild'](_0x4ef6a5),chatInput['value']='',chatInput[_0x42ef57(0x1c1)][_0x42ef57(0x18d)]=_0x42ef57(0x1ff),sendMessageBtn[_0x42ef57(0x194)]=!![],chatMessages['scrollTop']=chatMessages[_0x42ef57(0x1be)];try{const _0x25d11d=await db[_0x42ef57(0x15e)](_0x42ef57(0x15b))[_0x42ef57(0x259)]({'text':_0x7531c,'senderId':currentUser[_0x42ef57(0x229)],'senderName':userData?.['name']||_0x42ef57(0x20e),'createdAt':firebase[_0x42ef57(0x149)][_0x42ef57(0x1f9)][_0x42ef57(0x246)](),'status':'sent'}),_0x103ebe=document[_0x42ef57(0x231)](_0x4e00ad);if(_0x103ebe){_0x103ebe['id']=_0x25d11d['id'];const _0x24561b=_0x103ebe['querySelector'](_0x42ef57(0x15c));_0x24561b&&(_0x24561b[_0x42ef57(0x254)]='‚úì',_0x24561b[_0x42ef57(0x19a)][_0x42ef57(0x259)](_0x42ef57(0x113)));}}catch(_0x3bcf57){console['error'](_0x42ef57(0x145),_0x3bcf57);const _0x1c5faf=document[_0x42ef57(0x231)](_0x4e00ad);_0x1c5faf&&(_0x1c5faf[_0x42ef57(0x1c0)]('.message-status')[_0x42ef57(0x254)]='‚úï');}});function createMessageElement(_0x4c14e6){const _0x217a2f=_0x185cc4,_0x1e0d75=_0x4c14e6['senderId']===currentUser?.['uid'],_0x1fe825=_0x4c14e6[_0x217a2f(0x129)]['toDate']?formatTime(_0x4c14e6[_0x217a2f(0x129)][_0x217a2f(0x21c)]()):formatTime(new Date(_0x4c14e6[_0x217a2f(0x129)])),_0x2eeef1=document[_0x217a2f(0x120)](_0x217a2f(0x1ac));return _0x2eeef1[_0x217a2f(0x248)]=_0x217a2f(0x1e9)+(_0x1e0d75?_0x217a2f(0x113):_0x217a2f(0x233)),_0x2eeef1['id']=_0x4c14e6['id'],_0x2eeef1[_0x217a2f(0x25d)]=_0x217a2f(0x215)+(!_0x1e0d75?'<div\x20class=\x22message-sender\x22>'+_0x4c14e6['senderName']+_0x217a2f(0x206):'')+_0x217a2f(0xf5)+_0x4c14e6[_0x217a2f(0x1bb)]+_0x217a2f(0x1ce)+_0x1fe825+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1e0d75?_0x217a2f(0x122)+(_0x4c14e6['status']||_0x217a2f(0x113))+'\x22>'+(_0x4c14e6['status']===_0x217a2f(0x19f)?_0x217a2f(0x1ee):'‚úì')+'</span>':'')+_0x217a2f(0x175),_0x2eeef1;}function formatTime(_0x45691d){const _0x388677=_0x185cc4;return _0x45691d[_0x388677(0x178)]([],{'hour':'2-digit','minute':_0x388677(0x1ed)});}chatInput['addEventListener']('keydown',_0x5310fb=>{const _0x2adc4e=_0x185cc4;_0x5310fb[_0x2adc4e(0x14e)]==='Enter'&&!_0x5310fb[_0x2adc4e(0x1dc)]&&(_0x5310fb['preventDefault'](),sendMessageBtn['click']()),updateTyping();});function updateProfileUI(){const _0xb890a6=_0x185cc4;if(!currentUser||!userData){profileName[_0xb890a6(0x254)]=_0xb890a6(0x146),profileUsername['textContent']=_0xb890a6(0x15a),profileEmail['textContent']='user@example.com',profileBio[_0xb890a6(0x254)]='No\x20bio\x20available.\x20Edit\x20your\x20profile\x20to\x20add\x20one.',booksShared[_0xb890a6(0x254)]='0',booksDownloaded[_0xb890a6(0x254)]='0',memberSince[_0xb890a6(0x254)]='-',avatarInitials[_0xb890a6(0x254)]='U',profileAvatarInitials[_0xb890a6(0x254)]='U',userPoints[_0xb890a6(0x254)]='0',withdrawBtn[_0xb890a6(0x194)]=!![];return;}profileName[_0xb890a6(0x254)]=userData[_0xb890a6(0x216)]||'No\x20Name',profileUsername[_0xb890a6(0x254)]='@'+(userData[_0xb890a6(0x1da)]||_0xb890a6(0x23f)),profileEmail[_0xb890a6(0x25d)]=_0xb890a6(0x217)+currentUser['email'],profileBio['textContent']=userData['bio']||_0xb890a6(0x100),booksShared[_0xb890a6(0x254)]=userData['booksShared']||'0',booksDownloaded[_0xb890a6(0x254)]=userData[_0xb890a6(0x18f)]||'0',userPoints[_0xb890a6(0x254)]=userData[_0xb890a6(0x23a)],withdrawBtn[_0xb890a6(0x194)]=!userData[_0xb890a6(0x23a)]||userData['points']<0x1f4;const _0x413af6=userData[_0xb890a6(0x216)]?userData[_0xb890a6(0x216)]['split']('\x20')['map'](_0x439828=>_0x439828[0x0])[_0xb890a6(0x1af)]('')['toUpperCase']():'U';avatarInitials[_0xb890a6(0x254)]=_0x413af6,profileAvatarInitials[_0xb890a6(0x254)]=_0x413af6;if(userData[_0xb890a6(0x129)]){const _0x3f46ca=userData[_0xb890a6(0x129)][_0xb890a6(0x21c)]?userData[_0xb890a6(0x129)][_0xb890a6(0x21c)]():new Date(userData['createdAt']);memberSince['textContent']=_0x3f46ca['getFullYear']();}else memberSince[_0xb890a6(0x254)]='-';fetchWithdrawalHistory();}function fetchWithdrawalHistory(){const _0x5c2845=_0x185cc4;if(!currentUser)return;db[_0x5c2845(0x15e)](_0x5c2845(0x17c))[_0x5c2845(0x21f)](_0x5c2845(0x108),'==',currentUser[_0x5c2845(0x229)])[_0x5c2845(0x1f5)](_0x5c2845(0x24d),'desc')[_0x5c2845(0x22d)](_0x1d7ccc=>{const _0x30b7f6=_0x5c2845;if(_0x1d7ccc[_0x30b7f6(0x142)]){emptyWithdrawalHistory[_0x30b7f6(0x1c1)]['display']=_0x30b7f6(0x127);return;}emptyWithdrawalHistory[_0x30b7f6(0x1c1)][_0x30b7f6(0x1e8)]=_0x30b7f6(0x221),withdrawalHistory[_0x30b7f6(0x25d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22withdrawal-history-title\x22>Withdrawal\x20History</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d7ccc[_0x30b7f6(0x157)](_0x266948=>{const _0x173e8d=_0x30b7f6,_0x1cd3a0=_0x266948[_0x173e8d(0x110)](),_0x11bfb8=document[_0x173e8d(0x120)](_0x173e8d(0x1ac));_0x11bfb8[_0x173e8d(0x248)]='withdrawal-item';const _0x4fb5c3=_0x1cd3a0[_0x173e8d(0x1f8)]===_0x173e8d(0x160)?_0x173e8d(0x20a):_0x1cd3a0[_0x173e8d(0x1f8)]===_0x173e8d(0x13c)?_0x173e8d(0x16b):_0x173e8d(0x166);_0x11bfb8[_0x173e8d(0x25d)]=_0x173e8d(0x1fe)+_0x1cd3a0[_0x173e8d(0x1e2)]+'\x20('+_0x1cd3a0['amountPoints']+_0x173e8d(0x104)+_0x1cd3a0[_0x173e8d(0x144)]+'\x20‚Ä¢\x20'+_0x1cd3a0['paymentId']+_0x173e8d(0x199)+formatDate(_0x1cd3a0[_0x173e8d(0x24d)][_0x173e8d(0x21c)]())+_0x173e8d(0xf7)+_0x4fb5c3+'\x22>'+_0x1cd3a0[_0x173e8d(0x1f8)]+_0x173e8d(0x1d7),withdrawalHistory[_0x173e8d(0x205)](_0x11bfb8);});});}withdrawalOptions[_0x185cc4(0x157)](_0x45de9f=>{const _0x49237b=_0x185cc4;_0x45de9f['addEventListener'](_0x49237b(0x170),()=>{const _0x3177ea=_0x49237b;withdrawalOptions[_0x3177ea(0x157)](_0x36874f=>_0x36874f['classList'][_0x3177ea(0x203)]('active')),_0x45de9f['classList']['add']('active'),selectedWithdrawalMethod=_0x45de9f[_0x3177ea(0x24e)]('data-method');switch(selectedWithdrawalMethod){case _0x3177ea(0x13a):paymentMethodLabel[_0x3177ea(0x254)]=_0x3177ea(0x1b4),paymentId['placeholder']=_0x3177ea(0x14b);break;case _0x3177ea(0x19b):paymentMethodLabel[_0x3177ea(0x254)]=_0x3177ea(0x1e0),paymentId[_0x3177ea(0x210)]=_0x3177ea(0x1a5);break;case _0x3177ea(0xef):paymentMethodLabel[_0x3177ea(0x254)]='Paytm\x20Number',paymentId[_0x3177ea(0x210)]=_0x3177ea(0x1b7);break;case _0x3177ea(0x250):paymentMethodLabel[_0x3177ea(0x254)]=_0x3177ea(0xea),paymentId['placeholder']=_0x3177ea(0x1a8);break;}selectedWithdrawalAmount&&paymentDetails[_0x3177ea(0x19a)][_0x3177ea(0x259)](_0x3177ea(0x12d));});}),amountOptions[_0x185cc4(0x157)](_0x432c3c=>{const _0x5d8aa1=_0x185cc4;_0x432c3c['addEventListener'](_0x5d8aa1(0x170),()=>{const _0x53239f=_0x5d8aa1;amountOptions[_0x53239f(0x157)](_0x108476=>_0x108476[_0x53239f(0x19a)][_0x53239f(0x203)](_0x53239f(0x12d))),_0x432c3c[_0x53239f(0x19a)][_0x53239f(0x259)](_0x53239f(0x12d)),selectedWithdrawalAmount=_0x432c3c[_0x53239f(0x24e)](_0x53239f(0xf8)),selectedWithdrawalRs=_0x432c3c['getAttribute'](_0x53239f(0x195)),selectedWithdrawalMethod&&paymentDetails[_0x53239f(0x19a)][_0x53239f(0x259)](_0x53239f(0x12d));});}),submitWithdrawalBtn['addEventListener'](_0x185cc4(0x170),async()=>{const _0x41841f=_0x185cc4;if(!currentUser||!userData||!selectedWithdrawalMethod||!selectedWithdrawalAmount||!paymentId[_0x41841f(0x107)]||!accountName[_0x41841f(0x107)]){showToast(_0x41841f(0x1de),_0x41841f(0x240));return;}if(userData[_0x41841f(0x23a)]<parseInt(selectedWithdrawalAmount)){showToast(_0x41841f(0x1a6),'error');return;}const _0xaa43fb=document[_0x41841f(0x231)]('withdrawalSpinner');submitWithdrawalBtn[_0x41841f(0x194)]=!![],_0xaa43fb[_0x41841f(0x1c1)]['display']=_0x41841f(0x184);try{await db[_0x41841f(0x15e)](_0x41841f(0x17c))[_0x41841f(0x259)]({'userId':currentUser[_0x41841f(0x229)],'userName':userData[_0x41841f(0x216)],'userEmail':currentUser[_0x41841f(0x1fc)],'method':selectedWithdrawalMethod,'paymentId':paymentId[_0x41841f(0x107)],'accountName':accountName[_0x41841f(0x107)],'amountPoints':parseInt(selectedWithdrawalAmount),'amountRs':parseInt(selectedWithdrawalRs),'status':_0x41841f(0x114),'requestedAt':firebase[_0x41841f(0x149)][_0x41841f(0x1f9)][_0x41841f(0x246)](),'processedAt':null,'processedBy':null}),await db[_0x41841f(0x15e)](_0x41841f(0x1b9))[_0x41841f(0x16f)](currentUser[_0x41841f(0x229)])[_0x41841f(0x186)]({'points':firebase[_0x41841f(0x149)][_0x41841f(0x1f9)][_0x41841f(0x155)](-parseInt(selectedWithdrawalAmount))}),userData[_0x41841f(0x23a)]-=parseInt(selectedWithdrawalAmount),userPoints['textContent']=userData[_0x41841f(0x23a)],withdrawBtn[_0x41841f(0x194)]=userData[_0x41841f(0x23a)]<0x1f4,closeModal(withdrawalModal),showToast(_0x41841f(0x150),_0x41841f(0x119)),withdrawalOptions[_0x41841f(0x157)](_0xaf5c=>_0xaf5c['classList'][_0x41841f(0x203)](_0x41841f(0x12d))),amountOptions[_0x41841f(0x157)](_0x3489b9=>_0x3489b9['classList'][_0x41841f(0x203)](_0x41841f(0x12d))),paymentDetails['classList'][_0x41841f(0x203)](_0x41841f(0x12d)),paymentId[_0x41841f(0x107)]='',accountName[_0x41841f(0x107)]='',selectedWithdrawalMethod=null,selectedWithdrawalAmount=null,selectedWithdrawalRs=null;}catch(_0xfe8a3e){console[_0x41841f(0x240)](_0x41841f(0x15d),_0xfe8a3e),showToast('Error\x20submitting\x20withdrawal\x20request',_0x41841f(0x240));}finally{submitWithdrawalBtn['disabled']=![],_0xaa43fb['style'][_0x41841f(0x1e8)]=_0x41841f(0x221);}}),withdrawBtn['addEventListener'](_0x185cc4(0x170),()=>{const _0x5cee8c=_0x185cc4;if(!currentUser){openModal(loginModal);return;}if(userData[_0x5cee8c(0x23a)]<0x1f4){showToast('You\x20need\x20at\x20least\x20500\x20points\x20to\x20withdraw',_0x5cee8c(0x240));return;}openModal(withdrawalModal);}),closeWithdrawalModal['addEventListener']('click',()=>closeModal(withdrawalModal));function renderBooks(_0x45ad8b){const _0x1ba608=_0x185cc4;allBooks=_0x45ad8b;if(_0x45ad8b['length']===0x0){emptyState[_0x1ba608(0x1c1)][_0x1ba608(0x1e8)]=_0x1ba608(0x127),booksContainer[_0x1ba608(0x25d)]='',booksContainer[_0x1ba608(0x205)](emptyState);return;}emptyState['style'][_0x1ba608(0x1e8)]=_0x1ba608(0x221),booksContainer[_0x1ba608(0x25d)]='',_0x45ad8b[_0x1ba608(0x157)]((_0x2365e3,_0x4f98d9)=>{const _0x34c6ea=_0x1ba608,_0x1a1163=document[_0x34c6ea(0x120)]('div');_0x1a1163['className']='book-card',_0x1a1163[_0x34c6ea(0x238)](_0x34c6ea(0x18e),_0x2365e3['id']),_0x1a1163[_0x34c6ea(0x1c1)][_0x34c6ea(0x22f)]=_0x4f98d9*0.1+'s';let _0x26ef61='';if(_0x2365e3[_0x34c6ea(0x1f8)]===_0x34c6ea(0x18b)&&_0x2365e3[_0x34c6ea(0x152)]&&_0x2365e3[_0x34c6ea(0x111)]){const _0x53b9e8=_0x2365e3[_0x34c6ea(0x111)][_0x34c6ea(0x21c)]();_0x26ef61=_0x34c6ea(0x13b)+_0x2365e3['reviewedBy']+_0x34c6ea(0x224)+formatDate(_0x53b9e8);}else{if(_0x2365e3['status']===_0x34c6ea(0x13c)&&_0x2365e3[_0x34c6ea(0x152)]&&_0x2365e3['reviewedAt']){const _0x5c10d9=_0x2365e3[_0x34c6ea(0x111)]['toDate']();_0x26ef61=_0x34c6ea(0x219)+_0x2365e3[_0x34c6ea(0x152)]+_0x34c6ea(0x224)+formatDate(_0x5c10d9);}}_0x1a1163[_0x34c6ea(0x25d)]=_0x34c6ea(0xfd)+(_0x2365e3['imageUrl']||_0x34c6ea(0x1c3))+_0x34c6ea(0x171)+_0x2365e3[_0x34c6ea(0x227)]+'\x22\x20class=\x22book-img\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22book-overlay-title\x22>'+_0x2365e3['bookName']+_0x34c6ea(0x212)+_0x2365e3[_0x34c6ea(0x223)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2365e3[_0x34c6ea(0x200)]?'<p\x20class=\x22book-overlay-desc\x22>'+_0x2365e3[_0x34c6ea(0x200)]+_0x34c6ea(0x103):'')+_0x34c6ea(0x232)+_0x2365e3['driveLink']+_0x34c6ea(0x1d2)+(_0x2365e3[_0x34c6ea(0x1f8)]==='pending'?_0x34c6ea(0x180):'')+_0x34c6ea(0x19c)+(_0x2365e3['status']===_0x34c6ea(0x13c)?_0x34c6ea(0x243):'')+_0x34c6ea(0x19c)+(_0x2365e3[_0x34c6ea(0x1f8)]===_0x34c6ea(0x18b)?'<span\x20class=\x22status-badge\x20status-approved\x22>Approved</span>':'')+_0x34c6ea(0x237)+_0x2365e3['bookName']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22book-author\x22>By\x20'+_0x2365e3[_0x34c6ea(0x223)]+_0x34c6ea(0x1f0)+(_0x2365e3['submittedByName']||'Anonymous')+_0x34c6ea(0x23c)+(_0x2365e3['submittedAt']?formatDate(_0x2365e3['submittedAt'][_0x34c6ea(0x21c)]()):_0x34c6ea(0x1e3))+_0x34c6ea(0x257)+(_0x26ef61?_0x34c6ea(0x209)+_0x26ef61+_0x34c6ea(0x206):'')+_0x34c6ea(0x22b)+_0x2365e3[_0x34c6ea(0x159)]+_0x34c6ea(0x1ca),booksContainer[_0x34c6ea(0x205)](_0x1a1163);}),document[_0x1ba608(0x1a0)](_0x1ba608(0x234))[_0x1ba608(0x157)](_0x32fafa=>{const _0x10f1dd=_0x1ba608;_0x32fafa[_0x10f1dd(0xfa)](_0x10f1dd(0x170),_0x50d39b=>{const _0x33c9aa=_0x10f1dd;if(!currentUser){openModal(loginModal);return;}const _0x24ffd1=_0x50d39b['currentTarget'][_0x33c9aa(0x24e)](_0x33c9aa(0x1ae));window[_0x33c9aa(0x11c)](_0x24ffd1,'_blank');if(currentUser){db[_0x33c9aa(0x15e)](_0x33c9aa(0x1b9))[_0x33c9aa(0x16f)](currentUser[_0x33c9aa(0x229)])['update']({'booksDownloaded':firebase[_0x33c9aa(0x149)][_0x33c9aa(0x1f9)][_0x33c9aa(0x155)](0x1)});const _0x2666b0=_0x50d39b[_0x33c9aa(0x1c2)]['closest']('.book-card')?.['getAttribute']('data-id');_0x2666b0&&db['collection'](_0x33c9aa(0x17f))['doc'](_0x2666b0)[_0x33c9aa(0x186)]({'downloads':firebase[_0x33c9aa(0x149)][_0x33c9aa(0x1f9)][_0x33c9aa(0x155)](0x1)});}});});}function renderUserBooks(_0x335bf){const _0x12a47e=_0x185cc4;if(_0x335bf[_0x12a47e(0x172)]===0x0){profileBooksContainer[_0x12a47e(0x25d)]=_0x12a47e(0xfc);return;}profileBooksContainer[_0x12a47e(0x25d)]='',_0x335bf[_0x12a47e(0x157)](_0x4a88bc=>{const _0xdf6538=_0x12a47e,_0x345b47=document[_0xdf6538(0x120)](_0xdf6538(0x1ac));_0x345b47[_0xdf6538(0x248)]='book-card',_0x345b47[_0xdf6538(0x25d)]=_0xdf6538(0xfd)+(_0x4a88bc[_0xdf6538(0x101)]||_0xdf6538(0x1c3))+'\x22\x20alt=\x22'+_0x4a88bc['bookName']+_0xdf6538(0x13f)+_0x4a88bc[_0xdf6538(0x227)]+_0xdf6538(0x212)+_0x4a88bc[_0xdf6538(0x223)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4a88bc['description']?_0xdf6538(0x1e4)+_0x4a88bc[_0xdf6538(0x200)]+'</p>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22book-overlay-btn\x22\x20data-link=\x22'+_0x4a88bc['driveLink']+_0xdf6538(0x17a)+(_0x4a88bc[_0xdf6538(0x1f8)]===_0xdf6538(0x114)?_0xdf6538(0x180):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4a88bc[_0xdf6538(0x1f8)]===_0xdf6538(0x13c)?_0xdf6538(0x243):'')+_0xdf6538(0x19c)+(_0x4a88bc[_0xdf6538(0x1f8)]===_0xdf6538(0x18b)?_0xdf6538(0x1c7):'')+_0xdf6538(0x237)+_0x4a88bc[_0xdf6538(0x227)]+_0xdf6538(0x1f6)+_0x4a88bc[_0xdf6538(0x223)]+_0xdf6538(0x1f1)+(_0x4a88bc['submittedAt']?formatDate(_0x4a88bc[_0xdf6538(0x148)][_0xdf6538(0x21c)]()):'Pending')+_0xdf6538(0x1e5)+(_0x4a88bc['downloads']||0x0)+_0xdf6538(0x257)+(_0x4a88bc[_0xdf6538(0x152)]?_0xdf6538(0x1dd)+_0x4a88bc[_0xdf6538(0x152)]+'</div>':'')+_0xdf6538(0x22b)+_0x4a88bc[_0xdf6538(0x159)]+_0xdf6538(0x185),profileBooksContainer[_0xdf6538(0x205)](_0x345b47);}),document[_0x12a47e(0x1a0)](_0x12a47e(0x234))['forEach'](_0x4868ac=>{const _0x2cf843=_0x12a47e;_0x4868ac[_0x2cf843(0xfa)](_0x2cf843(0x170),_0x4c5c6c=>{const _0x65121b=_0x2cf843,_0xdce2b7=_0x4c5c6c['currentTarget'][_0x65121b(0x24e)](_0x65121b(0x1ae));window[_0x65121b(0x11c)](_0xdce2b7,_0x65121b(0x125));});});}function fetchUserBooks(){const _0x35a66b=_0x185cc4;if(!currentUser)return;const _0x482851=document[_0x35a66b(0x231)](_0x35a66b(0x1ad)),_0x3269c2=document[_0x35a66b(0x231)]('loadMoreBooksBtn');_0x482851['innerHTML']='',_0x3269c2[_0x35a66b(0x1c1)][_0x35a66b(0x1e8)]=_0x35a66b(0x221);let _0x1d1bd0=db[_0x35a66b(0x15e)](_0x35a66b(0x17f))['where'](_0x35a66b(0x20c),'==',currentUser[_0x35a66b(0x229)])[_0x35a66b(0x1f5)](_0x35a66b(0x148),_0x35a66b(0xf4))[_0x35a66b(0x17b)](booksLimit);_0x1d1bd0[_0x35a66b(0xeb)]()[_0x35a66b(0x1b1)](_0x4bf893=>{const _0x4a4e15=_0x35a66b;if(_0x4bf893[_0x4a4e15(0x142)]){_0x482851[_0x4a4e15(0x25d)]=_0x4a4e15(0x253);return;}const _0x5eeb92=[];_0x4bf893[_0x4a4e15(0x157)](_0x453d56=>{const _0x3dac14=_0x4a4e15;_0x5eeb92['push']({'id':_0x453d56['id'],..._0x453d56[_0x3dac14(0x110)]()});}),renderUserBooks(_0x5eeb92),_0x4bf893[_0x4a4e15(0x1f7)]['length']===booksLimit?(lastBookSnapshot=_0x4bf893[_0x4a4e15(0x1f7)][_0x4bf893[_0x4a4e15(0x1f7)][_0x4a4e15(0x172)]-0x1],hasMoreBooks=!![],_0x3269c2[_0x4a4e15(0x1c1)][_0x4a4e15(0x1e8)]='flex'):(hasMoreBooks=![],_0x3269c2[_0x4a4e15(0x1c1)][_0x4a4e15(0x1e8)]=_0x4a4e15(0x221));})['catch'](_0x314ca6=>{console['error']('Error\x20fetching\x20user\x20books:',_0x314ca6);});}document[_0x185cc4(0x231)](_0x185cc4(0x176))[_0x185cc4(0xfa)](_0x185cc4(0x170),()=>{const _0x59aa2f=_0x185cc4;if(!currentUser||!hasMoreBooks)return;const _0x233823=document[_0x59aa2f(0x231)](_0x59aa2f(0x1ad)),_0x20fbf8=document[_0x59aa2f(0x231)]('loadMoreBooksBtn');_0x20fbf8[_0x59aa2f(0x194)]=!![];let _0x2cdeff=db[_0x59aa2f(0x15e)]('books')[_0x59aa2f(0x21f)]('submittedBy','==',currentUser[_0x59aa2f(0x229)])['orderBy']('submittedAt',_0x59aa2f(0xf4))[_0x59aa2f(0x21a)](lastBookSnapshot)[_0x59aa2f(0x17b)](booksLimit);_0x2cdeff['get']()[_0x59aa2f(0x1b1)](_0x213e1c=>{const _0x34c41d=_0x59aa2f,_0x432f61=[];_0x213e1c['forEach'](_0x15c871=>{const _0x161b76=_0x4c52;_0x432f61[_0x161b76(0x24a)]({'id':_0x15c871['id'],..._0x15c871[_0x161b76(0x110)]()});}),renderUserBooks(_0x432f61,!![]),_0x213e1c['docs'][_0x34c41d(0x172)]===booksLimit?(lastBookSnapshot=_0x213e1c[_0x34c41d(0x1f7)][_0x213e1c[_0x34c41d(0x1f7)]['length']-0x1],hasMoreBooks=!![]):(hasMoreBooks=![],_0x20fbf8[_0x34c41d(0x1c1)][_0x34c41d(0x1e8)]=_0x34c41d(0x221)),_0x20fbf8[_0x34c41d(0x194)]=![];})['catch'](_0x4f4b26=>{const _0x16fa56=_0x59aa2f;console[_0x16fa56(0x240)](_0x16fa56(0x1e1),_0x4f4b26),_0x20fbf8[_0x16fa56(0x194)]=![];});});function renderUserBooks(_0x3af5f0,_0x545d78=![]){const _0x1863cb=_0x185cc4,_0x8238f8=document['getElementById'](_0x1863cb(0x1ad));!_0x545d78&&(_0x8238f8[_0x1863cb(0x25d)]='');if(_0x3af5f0[_0x1863cb(0x172)]===0x0&&!_0x545d78){_0x8238f8[_0x1863cb(0x25d)]=_0x1863cb(0x1cf);return;}_0x3af5f0[_0x1863cb(0x157)](_0x4eea3b=>{const _0x2d5ebe=_0x1863cb,_0x11912e=document[_0x2d5ebe(0x120)](_0x2d5ebe(0x1ac));_0x11912e['className']='book-card',_0x11912e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-img-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x4eea3b[_0x2d5ebe(0x101)]||'https://via.placeholder.com/300x200?text=No+Cover')+'\x22\x20alt=\x22'+_0x4eea3b['bookName']+_0x2d5ebe(0x1aa)+_0x4eea3b['bookName']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22book-overlay-author\x22>By\x20'+_0x4eea3b[_0x2d5ebe(0x223)]+_0x2d5ebe(0x1d1)+(_0x4eea3b[_0x2d5ebe(0x200)]?_0x2d5ebe(0x1e4)+_0x4eea3b[_0x2d5ebe(0x200)]+_0x2d5ebe(0x103):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22book-overlay-btn\x22\x20data-link=\x22'+_0x4eea3b['driveLink']+_0x2d5ebe(0x207)+(_0x4eea3b[_0x2d5ebe(0x1f8)]===_0x2d5ebe(0x114)?_0x2d5ebe(0x180):'')+_0x2d5ebe(0x215)+(_0x4eea3b[_0x2d5ebe(0x1f8)]===_0x2d5ebe(0x13c)?_0x2d5ebe(0x243):'')+_0x2d5ebe(0x215)+(_0x4eea3b[_0x2d5ebe(0x1f8)]===_0x2d5ebe(0x18b)?_0x2d5ebe(0x1c7):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22book-title\x22>'+_0x4eea3b[_0x2d5ebe(0x227)]+_0x2d5ebe(0x153)+_0x4eea3b['authorName']+_0x2d5ebe(0x1cb)+(_0x4eea3b[_0x2d5ebe(0x148)]?formatDate(_0x4eea3b[_0x2d5ebe(0x148)]['toDate']()):'Pending')+_0x2d5ebe(0x131)+(_0x4eea3b[_0x2d5ebe(0x141)]||0x0)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4eea3b[_0x2d5ebe(0x152)]?_0x2d5ebe(0x1dd)+_0x4eea3b['reviewedBy']+'</div>':'')+_0x2d5ebe(0xf2)+_0x4eea3b[_0x2d5ebe(0x159)]+_0x2d5ebe(0x220),_0x8238f8['appendChild'](_0x11912e);}),document['querySelectorAll']('.download-btn,\x20.book-overlay-btn')[_0x1863cb(0x157)](_0xd82e24=>{const _0x1550e4=_0x1863cb;_0xd82e24['addEventListener'](_0x1550e4(0x170),_0x221d18=>{const _0x146898=_0x1550e4,_0x6bfcc=_0x221d18[_0x146898(0x1c2)][_0x146898(0x24e)](_0x146898(0x1ae));window['open'](_0x6bfcc,'_blank');});});}function _0x174d(){const _0x2bf5d7=['loginModal','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loadMoreBooksBtn','Logout\x20error:','toLocaleTimeString','signupPassword','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-external-link-alt\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','limit','withdrawals','addBookBtn','closeDiscoverModal','books','<span\x20class=\x22status-badge\x20status-pending\x22>Pending</span>','input','421965JthRmq','72done=','inline-block','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-external-link-alt\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','update','ease-in-out','map','editProfileBtn','1.2rem','approved','getItem','height','data-id','booksDownloaded','signOut','submitBookBtn','bookDescription','userPoints','disabled','data-rs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>','closest','Signup\x20error:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22withdrawal-date\x22>','classList','bank','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','target','warning','sending','querySelectorAll','light','</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>By\x20','loginEmail','searchContainer','Enter\x20your\x20bank\x20account\x20number','You\x20don\x27t\x20have\x20enough\x20points','editProfileName','Enter\x20your\x20PhonePe\x20registered\x20number','searchInput','\x22\x20class=\x22book-img\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22book-overlay-title\x22>','setItem','div','profileBooksContainer','data-link','join','1180857gDWbrH','then','scrollTop','closeAddBookModal','UPI\x20ID','saveProfileBtn','signupBtn','Enter\x20your\x20Paytm\x20registered\x20number','toUpperCase','users','submitWithdrawalBtn','text','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','includes','scrollHeight','\x20is\x20typing...\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelector','style','currentTarget','https://via.placeholder.com/300x200?text=No+Cover','AIzaSyASKb2xr27kjYokZICpIbBYULWsRdmBzI0','profileAvatar','typingIndicator','<span\x20class=\x22status-badge\x20status-approved\x22>Approved</span>','preventDefault','signupForm','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20Download\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><i\x20class=\x22fas\x20fa-calendar-alt\x22></i>\x20','storage','editProfileModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22message-time\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-book\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20Books\x20Shared\x20Yet</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Start\x20sharing\x20books\x20with\x20the\x20community!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20updating\x20download\x20count:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20Download\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loginBtn','2017228qJnzgq','4649940ceYjkK','initializeApp','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20updating\x20profile:','profileAvatarInitials','username','loginPassword','shiftKey','<div\x20class=\x22book-admin-info\x22><i\x20class=\x22fas\x20fa-user-shield\x22></i>\x20Reviewed\x20by\x20','Please\x20fill\x20all\x20the\x20details','fa-check-circle','Bank\x20Account\x20Number','Error\x20loading\x20more\x20books:','amountRs','N/A','<p\x20class=\x22book-overlay-desc\x22>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><i\x20class=\x22fas\x20fa-download\x22></i>\x20','innerWidth','set','display','message\x20','Error:\x20','.toast-close','signInWithEmailAndPassword','2-digit','...','Error\x20logging\x20out','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><i\x20class=\x22fas\x20fa-user\x22></i>\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-meta\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><i\x20class=\x22fas\x20fa-calendar-alt\x22></i>\x20','19328220PwEIZr','submit','parse','orderBy','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22book-author\x22>By\x20','docs','status','FieldValue','docChanges','.header','email','signupBio','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22withdrawal-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22withdrawal-amount\x22>‚Çπ','auto','description','signupUsername','toLowerCase','remove','color','appendChild','</div>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-external-link-alt\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','977405961718','<div\x20class=\x22book-admin-info\x22><i\x20class=\x22fas\x20fa-user-shield\x22></i>\x20','status-completed','category','submittedBy','Please\x20login\x20to\x20add\x20books','Anonymous','memberSince','placeholder','emptyWithdrawalHistory','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22book-overlay-author\x22>By\x20','data-theme','userAvatar','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','name','<i\x20class=\x22fas\x20fa-envelope\x22></i>\x20','Error\x20fetching\x20books:','Rejected\x20by\x20','startAfter','scrollY','toDate','modified','.modal','where','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-external-link-alt\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','none','fa-exclamation-circle','authorName','\x20on\x20','scrollIntoView','saveProfileSpinner','bookName','padStart','uid','profileBio','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22download-btn\x22\x20data-link=\x22','addBookForm','onSnapshot','search-result-item','animationDelay','overflow','getElementById','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22book-overlay-btn\x22\x20data-link=\x22','received','.download-btn,\x20.book-overlay-btn','.theme-toggle','chatBackBtn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22book-title\x22>','setAttribute','drive.google.com','points','userName','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><i\x20class=\x22fas\x20fa-calendar-alt\x22></i>\x20','chatMessages','fas\x20fa-search','user','error','split','48done=','<span\x20class=\x22status-badge\x20status-rejected\x22>Rejected</span>','center','insertBefore','serverTimestamp','trim','className','getMonth','push','smooth','highlight','requestedAt','getAttribute','5394032EJsjOy','phonepay','.book-card[data-id=\x22','scrolled','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-book\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20Books\x20Shared\x20Yet</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Start\x20sharing\x20books\x20with\x20the\x20community!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','Error\x20updating\x20profile:\x20','https://eduspark-books-default-rtdb.asia-southeast1.firebasedatabase.app','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','exists','add','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','switchToSignup','bookImageUrl','innerHTML','PhonePe\x20Number','get','18FxOxzK','editProfileForm','profileUsername','paytm','closeEditProfileModal','toast\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22download-btn\x22\x20data-link=\x22','signupName','desc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','displayName','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22withdrawal-status\x20','data-amount','submitSpinner','addEventListener','slice','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-book\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20Books\x20Shared\x20Yet</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Start\x20sharing\x20books\x20with\x20the\x20community!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-img-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','G-G6JHCMYZ0X','profileEmail','No\x20bio\x20available.\x20Edit\x20your\x20profile\x20to\x20add\x20one.','imageUrl','emptyState','</p>','\x20points)</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22withdrawal-method\x22>','closeSignupModal','discoverBtn','value','userId','log','5QGiAXo','scrollTo','.book-card','marginLeft','pointer','focus','data','reviewedAt','Login\x20failed:\x20','sent','pending','profileBackBtn','getDate','onAuthStateChanged','.withdrawal-option','success','discoverModal','switchToLogin','open','61449OaiEDV','hidden','added','createElement','chatBtn','<span\x20class=\x22message-status\x20','booksContainer','sendMessageBtn','_blank','Login\x20error:','block','href','createdAt','typing','Book\x20submitted\x20for\x20approval!','avatarInitials','active','withdrawBtn','type','editProfileUsername','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span><i\x20class=\x22fas\x20fa-download\x22></i>\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22toast-close\x22>&times;</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','eduspark-books.firebasestorage.app','approvedAt','Your\x20book\x20was\x20approved!','24done=','body','contains','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','upi','Approved\x20by\x20','rejected','temp-','info','\x22\x20class=\x22book-img\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22book-overlay\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22book-overlay-title\x22>','Please\x20provide\x20a\x20valid\x20Google\x20Drive\x20link','downloads','empty','message','method','Error\x20sending\x20message:','User','getFullYear','submittedAt','firestore','accountName','Enter\x20your\x20UPI\x20ID\x20(e.g.,\x20name@upi)','cookie','Error\x20adding\x20book:','key','filter','Withdrawal\x20request\x20submitted\x20successfully!','bio','reviewedBy','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22book-author\x22>By\x20','senderId','increment','cursor','forEach','booksShared','driveLink','@username','messages','.message-status','Error\x20submitting\x20withdrawal:','collection','show','completed','bookCategory','fa-exclamation-triangle','theme','paymentMethodLabel','now','status-pending','80yDwnpN','<div\x20class=\x22no-results\x22>No\x20books\x20found\x20matching\x20your\x20search</div>','editProfileBio','Signup\x20failed:\x20','status-rejected','addBookModal','processedApprovals','init','doc','click','\x22\x20alt=\x22','length'];_0x174d=function(){return _0x2bf5d7;};return _0x174d();}function _0x4c52(_0x49ec27,_0x13a64a){const _0x174d71=_0x174d();return _0x4c52=function(_0x4c5274,_0x2e6fa8){_0x4c5274=_0x4c5274-0xea;let _0x52714b=_0x174d71[_0x4c5274];return _0x52714b;},_0x4c52(_0x49ec27,_0x13a64a);}function formatDate(_0x42e6a1){const _0x22df39=_0x185cc4,_0x450deb=_0x42e6a1[_0x22df39(0x116)]()[_0x22df39(0x174)]()['padStart'](0x2,'0'),_0x576e5c=(_0x42e6a1[_0x22df39(0x249)]()+0x1)[_0x22df39(0x174)]()[_0x22df39(0x228)](0x2,'0'),_0x477c36=_0x42e6a1[_0x22df39(0x147)]();return _0x450deb+'/'+_0x576e5c+'/'+_0x477c36;}function fetchBooks(){const _0x43c623=_0x185cc4;db['collection'](_0x43c623(0x17f))[_0x43c623(0x21f)](_0x43c623(0x1f8),'==',_0x43c623(0x18b))[_0x43c623(0x1f5)](_0x43c623(0x134),_0x43c623(0xf4))[_0x43c623(0x22d)](_0x3e0c50=>{const _0x5710cd=[];_0x3e0c50['forEach'](_0x2f43f0=>{const _0x437b48=_0x4c52;_0x5710cd[_0x437b48(0x24a)]({'id':_0x2f43f0['id'],..._0x2f43f0['data']()});}),renderBooks(_0x5710cd);},_0x1a3539=>{const _0x4354ef=_0x43c623;console[_0x4354ef(0x240)](_0x4354ef(0x218),_0x1a3539);});}auth[_0x185cc4(0x117)](async _0x598a63=>{const _0x3d6216=_0x185cc4;currentUser=_0x598a63;if(_0x598a63){const _0x37710f=await db['collection'](_0x3d6216(0x1b9))[_0x3d6216(0x16f)](_0x598a63[_0x3d6216(0x229)])['get']();userData=_0x37710f['exists']?_0x37710f['data']():null,setupDownloadButtons(),setupBookApprovalListener();if(!_0x37710f[_0x3d6216(0x258)]){const _0x55dfce=_0x598a63[_0x3d6216(0xf6)]||_0x3d6216(0x146),_0x167a01=_0x55dfce[_0x3d6216(0x241)]('\x20')[_0x3d6216(0x188)](_0xda5c62=>_0xda5c62[0x0])[_0x3d6216(0x1af)]('')[_0x3d6216(0x1b8)]();await db['collection'](_0x3d6216(0x1b9))[_0x3d6216(0x16f)](_0x598a63[_0x3d6216(0x229)])[_0x3d6216(0x1e7)]({'name':_0x55dfce,'email':_0x598a63[_0x3d6216(0x1fc)],'username':_0x598a63[_0x3d6216(0x1fc)][_0x3d6216(0x241)]('@')[0x0],'createdAt':firebase[_0x3d6216(0x149)][_0x3d6216(0x1f9)]['serverTimestamp'](),'booksShared':0x0,'booksDownloaded':0x0,'points':0x0,'role':_0x3d6216(0x23f),'lastActive':firebase[_0x3d6216(0x149)][_0x3d6216(0x1f9)]['serverTimestamp'](),'status':_0x3d6216(0x12d)}),userData={'name':_0x55dfce,'email':_0x598a63['email'],'username':_0x598a63[_0x3d6216(0x1fc)][_0x3d6216(0x241)]('@')[0x0],'booksShared':0x0,'booksDownloaded':0x0,'points':0x0};}updateProfileUI(),fetchBooks(),setupTypingListener(),db['collection'](_0x3d6216(0x15b))['orderBy']('createdAt')['limit'](0x32)['onSnapshot'](_0x2bb5a9=>{const _0x4f3112=_0x3d6216;chatMessages['children'][_0x4f3112(0x172)]===0x0&&(chatMessages['innerHTML']=''),_0x2bb5a9[_0x4f3112(0x1fa)]()['forEach'](_0x135d0d=>{const _0x37aecc=_0x4f3112;if(_0x135d0d['type']===_0x37aecc(0x11f)){const _0x3f7db3=_0x135d0d['doc'][_0x37aecc(0x110)](),_0x50925f=_0x3f7db3[_0x37aecc(0x154)]===_0x598a63[_0x37aecc(0x229)];if(!document[_0x37aecc(0x231)](_0x135d0d[_0x37aecc(0x16f)]['id'])){const _0x30926d=createMessageElement({'id':_0x135d0d['doc']['id'],..._0x3f7db3});chatMessages[_0x37aecc(0x205)](_0x30926d);const _0x41d236=chatMessages[_0x37aecc(0x1be)]-chatMessages['clientHeight']<=chatMessages[_0x37aecc(0x1b2)]+0x32;(_0x41d236||_0x50925f)&&setTimeout(()=>{const _0x1eb352=_0x37aecc;chatMessages[_0x1eb352(0x1b2)]=chatMessages['scrollHeight'];},0x32);}}else{if(_0x135d0d[_0x37aecc(0x12f)]===_0x37aecc(0x21d)){const _0x38adea=document[_0x37aecc(0x231)](_0x135d0d[_0x37aecc(0x16f)]['id']);if(_0x38adea){const _0x372f28=_0x38adea[_0x37aecc(0x1c0)](_0x37aecc(0x15c));_0x372f28&&(_0x372f28['textContent']='‚úì‚úì',_0x372f28[_0x37aecc(0x19a)][_0x37aecc(0x259)]('delivered'));}}}});}),db[_0x3d6216(0x15e)](_0x3d6216(0x1b9))[_0x3d6216(0x16f)](_0x598a63[_0x3d6216(0x229)])[_0x3d6216(0x186)]({'lastActive':firebase['firestore']['FieldValue']['serverTimestamp']()});}else userData=null,updateProfileUI();}),addBookForm[_0x185cc4(0xfa)](_0x185cc4(0x1f3),async _0x595b0b=>{const _0x34a271=_0x185cc4;_0x595b0b[_0x34a271(0x1c8)]();if(!currentUser){showToast('Please\x20login\x20to\x20add\x20books',_0x34a271(0x240));return;}const _0x24a00e=document[_0x34a271(0x231)](_0x34a271(0x191)),_0x6892b8=document['getElementById'](_0x34a271(0xf9));_0x24a00e[_0x34a271(0x194)]=!![],_0x6892b8['style'][_0x34a271(0x1e8)]='inline-block';const _0x4f6975=document[_0x34a271(0x231)](_0x34a271(0x227))[_0x34a271(0x107)],_0x5a588e=document[_0x34a271(0x231)]('authorName')[_0x34a271(0x107)],_0x2db5db=document[_0x34a271(0x231)](_0x34a271(0x161))[_0x34a271(0x107)],_0xc8be5f=document['getElementById'](_0x34a271(0x25c))['value'],_0x122a64=document[_0x34a271(0x231)](_0x34a271(0x159))['value'],_0x226a6f=document[_0x34a271(0x231)](_0x34a271(0x192))[_0x34a271(0x107)];try{if(!_0x122a64[_0x34a271(0x1bd)](_0x34a271(0x239)))throw new Error('Please\x20provide\x20a\x20valid\x20Google\x20Drive\x20link');await db[_0x34a271(0x15e)](_0x34a271(0x17f))[_0x34a271(0x259)]({'bookName':_0x4f6975,'authorName':_0x5a588e,'category':_0x2db5db,'imageUrl':_0xc8be5f||null,'description':_0x226a6f,'driveLink':_0x122a64,'submittedBy':currentUser[_0x34a271(0x229)],'submittedByName':userData?.[_0x34a271(0x216)]||_0x34a271(0x20e),'submittedAt':firebase[_0x34a271(0x149)]['FieldValue']['serverTimestamp'](),'status':_0x34a271(0x114),'adminNotes':'','reviewedBy':'','reviewedAt':null,'rejectionReason':'','downloads':0x0}),await db[_0x34a271(0x15e)]('users')[_0x34a271(0x16f)](currentUser[_0x34a271(0x229)])[_0x34a271(0x186)]({'booksShared':firebase['firestore'][_0x34a271(0x1f9)][_0x34a271(0x155)](0x1)}),userData['points']=userData[_0x34a271(0x23a)],booksShared['textContent']=userData[_0x34a271(0x158)],userPoints[_0x34a271(0x254)]=userData['points'],withdrawBtn[_0x34a271(0x194)]=userData['points']<0x1f4,addBookForm['reset'](),closeModal(addBookModal);}catch(_0xf2df96){console[_0x34a271(0x240)](_0x34a271(0x14d),_0xf2df96),showToast('Error:\x20'+_0xf2df96[_0x34a271(0x143)],_0x34a271(0x240));}finally{_0x24a00e['disabled']=![],_0x6892b8[_0x34a271(0x1c1)]['display']=_0x34a271(0x221);}}),document[_0x185cc4(0x1a0)]('.download-btn,\x20.book-overlay-btn')[_0x185cc4(0x157)](_0x4b4428=>{const _0x28c2d2=_0x185cc4;_0x4b4428[_0x28c2d2(0xfa)](_0x28c2d2(0x170),_0x385a68=>{const _0x28e15a=_0x28c2d2;if(!currentUser){openModal(loginModal);return;}const _0x4c8d5a=_0x385a68[_0x28e15a(0x1c2)][_0x28e15a(0x24e)](_0x28e15a(0x1ae));window[_0x28e15a(0x11c)](_0x4c8d5a,_0x28e15a(0x125));if(currentUser){db[_0x28e15a(0x15e)](_0x28e15a(0x1b9))[_0x28e15a(0x16f)](currentUser[_0x28e15a(0x229)])['update']({'booksDownloaded':firebase['firestore'][_0x28e15a(0x1f9)][_0x28e15a(0x155)](0x0)});const _0x4ee314=_0x385a68['currentTarget']['closest'](_0x28e15a(0x10c))?.[_0x28e15a(0x24e)](_0x28e15a(0x18e));_0x4ee314&&(db[_0x28e15a(0x15e)](_0x28e15a(0x17f))[_0x28e15a(0x16f)](_0x4ee314)[_0x28e15a(0x186)]({'downloads':firebase['firestore'][_0x28e15a(0x1f9)]['increment'](0x1)}),db['collection'](_0x28e15a(0x17f))['doc'](_0x4ee314)['get']()[_0x28e15a(0x1b1)](_0xd97474=>{const _0x28d987=_0x28e15a;if(_0xd97474['exists']){const _0xc09746=_0xd97474['data']()[_0x28d987(0x20c)];_0xc09746&&_0xc09746!==currentUser[_0x28d987(0x229)]&&db[_0x28d987(0x15e)](_0x28d987(0x1b9))[_0x28d987(0x16f)](_0xc09746)[_0x28d987(0x186)]({'points':firebase['firestore'][_0x28d987(0x1f9)][_0x28d987(0x155)](0x0)});}}));}});});!document[_0x185cc4(0x14c)]['includes'](_0x185cc4(0x136))&&!document[_0x185cc4(0x14c)][_0x185cc4(0x1bd)](_0x185cc4(0x242))&&!document[_0x185cc4(0x14c)][_0x185cc4(0x1bd)](_0x185cc4(0x183))&&(window['location'][_0x185cc4(0x128)]='/login');
    </script>
</body>
</html>
